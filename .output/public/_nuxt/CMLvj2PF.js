import{_ as J}from"./7Abj0gdG.js";import{g as K,x as X,V as Z,r as l,G as ee,h as U,i as te,B as w,c as _,Y as ae,a2 as se,a as e,b as s,F as M,m as D,k as oe,t as n,w as c,q as g,l as k,o as i,n as le,d as O,s as ne,a0 as ie,v as re}from"./C0BoQxfz.js";import{_ as ce}from"./CC8LPtJJ.js";import{_ as ue}from"./DLa92jv0.js";import{_ as de}from"./CleGx6xR.js";import{_ as _e}from"./D8lB29bq.js";import{_ as me}from"./B8Sh6f35.js";import{P as pe}from"./BLfejrye.js";import{_ as fe}from"./DOR1AuX_.js";import{u as he}from"./P4bZhslL.js";import"./DfwwNYh5.js";import"./D9_0-jJL.js";import"./Bg4ppv9o.js";import"./kwc2bKR1.js";const ge={class:"w-100 flex flex-col items-center"},ve={class:"flex justify-between items-stretch w-10/12 my-16 gap-16 px-8"},xe={class:"w-2/12"},ye=e("h6",{class:"font-semibold"},"Client Dashboard",-1),be={class:"flex flex-col items-start mt-4"},we={class:"text-md text-primary"},ke={key:0,class:"w-10/12"},Ce={class:"font-semibold mb-3"},Fe={class:"flex gap-2 mb-4 justify-between"},Ve={class:"flex flex-col gap-4"},Pe={class:"flex justify-between items-center"},Ue={class:"flex items-center gap-2 capitalize"},Me={class:"font-semibold"},De={class:"flex justify-between items-center gap-2"},Oe={class:"capitalize"},Te={class:"flex gap-3 justify-between items-center"},je={class:"flex gap-3"},Ie={class:""},Se={class:"flex flex-col"},Be={class:"font-semibold text-primary"},Le={class:"flex gap-2 text-xs text-gray-700"},Ne=e("span",null,"x 1",-1),$e={class:"font-semibold text-primary text-md"},ze={key:0,class:"flex flex-col"},Ee={class:"flex flex-col items-center justify-center"},Ae=e("span",{class:"text-gray-400"},"No orders found",-1),Re={key:1,class:"flex flex-col"},lt={__name:"index",setup(He){K(),X();const T=Z(),{getMyOrders:j}=he();l(null);const I=[{key:"order-history",label:"Order History",icon:"user-circle",scope:"all"}],S=l({title:"",content:"",confirmText:"",cancelText:"",callback:null}),v=l(!0),B=l(!1),x=l("order-history"),u=l({fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}),m=l([]),C=l(5),F=l(!1),p=l({label:"All",value:"",color:"gray"}),f=l(""),L=ee(()=>{if(!u.value)return[];const t=u.value.is_admin??!1,r=u.value.is_facilitator??!1;return I.filter(o=>o.scope==="all"||o.scope==="admin"&&t||o.scope==="merchant"&&r)}),V=t=>{switch(t){case"completed":return{color:"green",text:"Completed"};case"paid":return{color:"blue",text:"In Progress"};case"pending":return{color:"violet",text:"Pending"};case"waitingpaid":return{color:"orange",text:"Waiting to be paid"};case"failed":return{color:"red",text:"Failed"};default:return{color:"gray",text:"Unknown"}}},N=t=>{T.push(t)},$=()=>{console.log("Logging out..."),w("token").value=null,u.value={fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}},z=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),E=async()=>{C.value++,await h()},A=async()=>{try{u.value=w("token").value.user||null}catch(t){console.error("Fetching user failed:",t)}},h=async()=>{try{const{data:t}=await j({page:1,per_page:C.value,order_status:p.value.value,search:f.value});m.value=t.data.orders.data,F.value=t.data.orders.current_page===t.data.orders.last_page}catch(t){console.error("Fetching orders failed:",t)}},R=(t,r)=>{let o;return function(...d){const y=this;clearTimeout(o),o=setTimeout(()=>{o=null,t.apply(y,d)},r)}};return U(p,async t=>{await h()}),U(f,R(async()=>{await h()},500),{immediate:!0}),te(async()=>{w("token").value&&(await A(),await h()),v.value=!1,window.scrollTo({top:0,behavior:"smooth"})}),(t,r)=>{const o=J,d=ne,y=ce,H=ue,W=ie,q=de,G=re,P=_e,Q=me;return i(),_("div",null,[ae(e("div",ge,[s(fe,{user:u.value,onLogout:$,class:"w-full"},null,8,["user"]),e("div",ve,[e("div",xe,[ye,e("div",be,[(i(!0),_(M,null,D(oe(L),(a,b)=>(i(),k(d,{key:b,block:"",class:le(["py-3 px-3.5 flex justify-start bg-white hover:bg-[#FDF1EE] shadow-none",x.value===a.key?"bg-[#FDF1EE]":"bg-white"]),onClick:Y=>x.value=a.key},{default:c(()=>[s(o,{name:a.icon,class:"text-2xl text-primary"},null,8,["name"]),e("span",we,n(a.label),1)]),_:2},1032,["class","onClick"]))),128))])]),x.value==="order-history"?(i(),_("div",ke,[e("h6",Ce," My Order History ("+n(m.value.length??0)+") ",1),e("div",Fe,[s(y,{options:[{label:"All",value:"",color:"gray"},{label:"Completed",value:"completed",color:"blue"},{label:"In Progress",value:"paid",color:"green"},{label:"Wait to be Paid",value:"waitingpaid",color:"orange"},{label:"Pending",value:"pending",color:"violet"},{label:"Failed",value:"failed",color:"red"}],modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=a=>p.value=a),placeholder:"Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:t.filterFacilitators,class:"max-w-[180px]"},null,8,["modelValue","onChange"]),s(H,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=a=>f.value=a)},null,8,["modelValue"])]),s(P,null,{default:c(()=>[e("div",Ve,[(i(!0),_(M,null,D(m.value,(a,b)=>(i(),k(P,{key:b,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}}},{header:c(()=>[e("div",Pe,[e("div",Ue,[s(W,{name:"i-heroicons-language"}),e("span",Me,n(a.merchant.type),1)]),e("div",De,[s(q,{variant:"soft",color:V(a.order_status).color},{default:c(()=>[e("span",Oe,n(V(a.order_status).text),1)]),_:2},1032,["color"]),s(d,{variant:"link"},{default:c(()=>[s(o,{name:"dots",class:"text-md text-primary"})]),_:1})])])]),default:c(()=>[e("div",Te,[e("div",je,[e("div",Ie,[s(G,{alt:a.merchant_user.fullname,src:a.merchant_user.photo,size:"lg",imgClass:"object-cover"},null,8,["alt","src"])]),e("div",Se,[e("span",Be,n(a.merchant_user.fullname),1),e("div",Le,[e("span",null,n(a.service.name),1),e("span",null,"("+n(a.language_source.name)+" - "+n(a.language_destination.name)+")",1),Ne]),e("span",$e,n(z(a.price)),1)])]),s(d,{color:"primary",class:"text-white mr-4",onClick:Y=>N({name:"my-client-orders-id",params:{id:a.id}})},{default:c(()=>[O(" Show Detail ")]),_:2},1032,["onClick"])])]),_:2},1024))),128)),m.value.length===0?(i(),_("div",ze,[e("div",Ee,[s(o,{name:"search",class:"text-4xl text-gray-400"}),Ae])])):g("",!0),F.value?g("",!0):(i(),_("div",Re,[s(d,{block:"",onClick:E,class:"mt-4 bg-accent"},{default:c(()=>[O(" Load More ")]),_:1})]))])]),_:1})])):g("",!0)])],512),[[se,!v.value]]),v.value?(i(),k(pe,{key:0})):g("",!0),s(Q,{isOpen:B.value,data:S.value},null,8,["isOpen","data"])])}}};export{lt as default};
