import{_ as ee}from"./DLO4McNJ.js";import{h as W,r as n,o as i,c as f,a as e,b as o,q as y,t as D,D as te,j as X,w as c,X as I,Y as R,l as j,k as G,d as h,s as ae,B as oe}from"./REdEvUJb.js";import{h as se}from"./Bi0mv_zh.js";import{P as le}from"./CiKglmt2.js";import{_ as Y}from"./B52gz1F6.js";import{_ as ne}from"./BgX1AO3M.js";import{_ as ie}from"./D1USsJ_L.js";import{_ as re}from"./BBay9uw3.js";import{u as ce,_ as ue}from"./DFKfOcRF.js";import{c as A,a as E,_ as de}from"./ByL2bfqY.js";import{u as H}from"./78fi8YQO.js";import"./C32kP1Pp.js";import"./CUfm5Dse.js";import"./GFnWuFuM.js";import"./DjxiS0Sv.js";const pe={class:"file-upload"},me=["accept"],_e={key:0,class:"px-4 py-2 border border-primary rounded hover:bg-primary flex items-center gap-1 group transition duration-200"},fe=e("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),he=[fe],ve={key:1},be=e("span",{class:"text-primary group-hover:text-white transition duration-200"}," Upload File ",-1),xe=e("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),ge={key:2,class:"mt-2 text-gray-700 text-xs"},ye={key:3,class:"mt-2 text-red-500 text-xs"},ke={__name:"FileUpload",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0}},emits:["fileUploaded"],setup(M,{emit:w}){const{uploadFile:k,deleteFile:s}=ce(),u=M,d=W(),U=w,x=n(null),r=n(""),v=n(""),g=n(null),p=n(!1),S=()=>{x.value.click()},C=()=>{const t=x.value.files[0];t&&(r.value=t.name,u.maxSize&&t.size>u.maxSize?(v.value=`File size exceeds the limit of ${N(u.maxSize/1024/1024,2)} MB.`,r.value=""):(v.value="",q(t,`${u.title}_${t.name}`)))},P=()=>{x.value.value=null,r.value="",v.value="",T(g.value)},N=(t,m)=>+(Math.round(t+"e"+m)+"e-"+m),q=(t,m)=>{p.value=!0,k(t,m).then(_=>{p.value=!1,g.value=_.data.data.fileRecord,B(_.data.data.fileRecord.url),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(_=>{console.error(_),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:z(_.response.data.error)})})},T=t=>{s(t.id).then(()=>{B(""),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(m=>{console.error(m),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:z(m.response.data.error)})})},B=t=>{U("fileUploaded",t)},z=t=>t.errors?t.errors[Object.keys(t.errors)[0]][0]:t.message;return(t,m)=>{const _=Y;return i(),f("div",pe,[e("input",{ref_key:"fileInput",ref:x,type:"file",accept:M.accept,class:"hidden",onChange:C},null,40,me),p.value?(i(),f("button",_e,he)):(i(),f("div",ve,[r.value?y("",!0):(i(),f("button",{key:0,onClick:S,class:"px-4 py-2 border border-primary rounded hover:bg-primary flex items-center gap-1 group transition duration-200"},[o(_,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),be])),r.value?(i(),f("button",{key:1,onClick:P,class:"px-4 py-2 border border-red-800 rounded hover:bg-red-800 flex items-center gap-1 group transition duration-200"},[o(_,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),xe])):y("",!0)])),r.value?(i(),f("p",ge," Selected file: "+D(r.value),1)):y("",!0),v.value?(i(),f("p",ye,D(v.value),1)):y("",!0)])}}},Fe={class:"h-full"},$e=e("h6",{class:"text-2xl font-semibold text-primary max-w-sm py-3"},[h(" Welcome Our New "),e("br"),e("b",{class:"text-accent text-3xl"},"Facilitators"),h("! ")],-1),we=e("p",{class:"text-sm text-gray-700 pb-3"},[h(" Please fill in the form below to get started "),e("br"),h(" to be a Gointerling facilitator. ")],-1),Ue=e("p",{class:"text-sm text-gray-700 pb-3"},[h(" Please fill in the form below to get started "),e("br"),h(" to be a Gointerling facilitator. ")],-1),Se=e("p",{class:"text-sm text-gray-700 pb-3"},[h(" Please fill in the form below to get started "),e("br"),h(" to be a Gointerling facilitator. ")],-1),Ce=e("p",{class:"text-sm text-gray-700 pb-3"},[h(" Please fill in the form below to get started "),e("br"),h(" to be a Gointerling facilitator. ")],-1),Pe={class:"flex gap-2 mt-4"},Ve={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Ne=e("span",null,"Selanjutnya",-1),Be={class:"flex items-center gap-2"},ze={__name:"MerchantForm",setup(M){const{updateMyMerchant:w}=H(),k=A({type:A().required(),bank:E().required(),bank_account:E().required(),cv_url:E().required()}),s=n(1),u=te(),d=W(),U=[{id:"translator",name:"Translator"},{id:"interpreter",name:"Interpreter"}],x=[{id:"bca",name:"BCA"},{id:"bni",name:"BNI"},{id:"bri",name:"BRI"},{id:"mandiri",name:"Mandiri"}],r=n(U.find(a=>a.id==="translator")||U[0]),v=n(!1);n(null);const g=n(null),p=n(null),S=n(null),C=n([]),P=n([]),N=a=>{(a===-1||T(s.value))&&(s.value=s.value+a),u.push({query:{step:s.value}})},q={1:{conditions:[{check:()=>!r.value,message:"Please select a type"}]},2:{conditions:[{check:()=>!p.value,message:"Please select a valid bank"},{check:()=>!g.value,message:"Please fill in the bank account number"}]},3:{conditions:[{check:()=>!S.value,message:"Please upload your CV"}]}},T=a=>{const l=q[a];if(!l)return!1;let F=!0;return l.conditions.forEach(V=>{V.check()&&(B(V.message),F=!1,v.value=!0),v.value=!1}),F},B=a=>{d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:a||"Please fill in the form correctly!"})},z=a=>{u.push(a)},t=a=>{S.value=a},m=a=>{C.value=a},_=a=>{P.value=a},J=async()=>{const a={type:r.value.id,bank_id:p.value.id,bank:p.value.name,bank_account:`${g.value}`,cv_url:S.value,portfolios:C.value,certificates:P.value};try{await w(a),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Merchant setup successfully!"}),z("/my/merchant/status")}catch(l){d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:l.response.data.error.message})}};return X(async()=>{p.value=x[0]}),(a,l)=>{const F=Y,V=ne,$=ie,K=re,Q=ke,L=ue,O=ae,Z=de;return i(),f("div",Fe,[o(Z,{"validation-schema":G(k),onSubmit:a.handleRegister,class:"h-full flex flex-col justify-between"},{default:c(()=>[e("div",null,[o(F,{name:"logo",filled:"",class:"text-4xl"}),$e,I(e("div",null,[we,o($,{name:"type",label:"Tipe Fasilitator",class:"mb-2"},{default:c(()=>[o(V,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=b=>r.value=b),options:U,placeholder:"Pilih Tipe Fasilitator",by:"id","option-attribute":"name","search-attributes":["name"]},null,8,["modelValue"])]),_:1})],512),[[R,s.value===1]]),I(e("div",null,[Ue,o($,{name:"bank",label:"Nama Bank",class:"mb-2"},{default:c(()=>[o(V,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=b=>p.value=b),options:x,placeholder:"Pilih Nama Bank",by:"id","option-attribute":"name","search-attributes":["name"]},null,8,["modelValue"])]),_:1}),o($,{name:"bank_account",label:"No Rekening",class:"mb-2"},{default:c(()=>[o(K,{type:"number",modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=b=>g.value=b),required:"",placeholder:"Masukkan No Rekening",class:"w-full",color:v.value?"red":"gray"},null,8,["modelValue","color"])]),_:1})],512),[[R,s.value===2]]),I(e("div",null,[Se,o($,{name:"bank",label:"File CV (Max 6MB)",class:"mb-4"},{default:c(()=>[o(Q,{title:"CV",accept:"application/pdf","max-size":"6291456",onFileUploaded:t})]),_:1})],512),[[R,s.value===3]]),I(e("div",null,[Ce,o($,{name:"portfolios",label:"Portfolios",class:"mb-2"},{default:c(()=>[o(L,{title:"Portfolio",accept:"application/pdf","max-size":"6291456",onFileUploaded:m})]),_:1}),o($,{name:"certificates",label:"Certificates ",class:"mb-2"},{default:c(()=>[o(L,{title:"Certificate",accept:"application/pdf","max-size":"6291456",onFileUploaded:_})]),_:1})],512),[[R,s.value===4]])]),e("div",Pe,[s.value>1?(i(),j(O,{key:0,class:"bg-accent",onClick:l[3]||(l[3]=b=>N(-1))},{default:c(()=>[e("div",Ve,[o(F,{name:"chevron-left"})])]),_:1})):y("",!0),s.value<4?(i(),j(O,{key:1,onClick:l[4]||(l[4]=b=>N(1))},{default:c(()=>[e("div",Me,[Ne,o(F,{name:"chevron-right"})])]),_:1})):y("",!0),s.value===4?(i(),j(O,{key:2,onClick:l[5]||(l[5]=b=>J())},{default:c(()=>[e("div",Be,[e("span",null,D(C.value.length>0||P.value.length>0?"Finish Setup":"Skip for Now"),1)])]),_:1})):y("",!0)])]),_:1},8,["validation-schema","onSubmit"])])}}},Ie={key:1,class:"w-full h-screen flex items-center justify-center bg-slate-200"},Re={class:"flex gap-4 p-4 h-full"},je={class:"flex align-middle justify-center items-center"},qe=["src"],Te={class:"px-6 min-w-[400px]"},tt={__name:"onboarding",setup(M){const{getMyMerchants:w}=H(),k=n(!0);return X(async()=>{await w().then(s=>{const u=s.data.data.user.merchants[0].status;oe("token").value.user.merchant_status=u,k.value=!1})}),(s,u)=>{const d=ee;return i(),f("div",null,[G(k)?(i(),j(le,{key:0})):(i(),f("div",Ie,[o(d,{ui:{body:{padding:"p-0",base:"h-full"}},class:"min-w-[750px] min-h-[400px] flex items-center justify-center"},{default:c(()=>[e("div",Re,[e("div",je,[e("img",{src:G(se),width:"300px"},null,8,qe)]),e("div",Te,[o(ze)])])]),_:1})]))])}}};export{tt as default};
