import{_ as oe}from"./DCBHic0n.js";import{_ as ne}from"./CqZ_JdIK.js";import{_ as se}from"./B39ZclTV.js";import{_ as le}from"./4QMAxoic.js";import{g as ie,r as d,h as ce,i as re,c as l,b as n,w as s,k as ue,o,a as i,t as c,j as pe,m as g,d as h,v as D,F,x as I,n as E,s as de,y as _e}from"./Csvhc2Mt.js";import{_ as me}from"./C_5G3v2K.js";import{_ as fe,a as ge}from"./D7xW5OxI.js";import{_ as he}from"./vY42ZLtw.js";import{_ as ve}from"./COT7bSr_.js";import{u as be}from"./q5tl5VpB.js";import"./-TVL0Fdd.js";import"./DT8P4fqL.js";import"./Bfvy6ACv.js";import"./2Bn5WqkC.js";import"./Hs4Jj2D-.js";const xe={class:"w-full pt-0 p-6 flex flex-col gap-2"},ye={class:"flex gap-2"},ke={key:1,class:"text-gray-300"},Ce={class:"flex gap-3 items-center"},Ve=["onClick"],Pe={class:"flex flex-col"},ze={class:"font-semibold text-primary"},Ue={class:"font-semibold text-primary py-1 capitalize"},De={class:"text-sm text-gray-600"},Se={key:0,class:"flex gap-1 flex-col"},$e={class:"flex gap-1 items-center"},Ne={class:"font-semibold text-primary"},Te={key:1,class:"text-gray-300"},Me={class:"flex gap-1 flex-col"},Ae={class:"font-semibold text-primary"},Oe={key:0},Le={key:0,class:"text-sm text-red-500"},Be={key:1,class:"text-gray-300"},Fe={key:1,class:"text-gray-300"},Ie={key:0,class:"text-gray-300"},Ee={key:1,class:"text-gray-300"},je={key:0,class:"text-gray-300"},qe={key:1,class:"text-gray-300"},Je={class:"flex gap-1"},Ke="Facilitators List",it={__name:"merchants",setup(He){const{getMerchants:j,updateMerchantStatus:q}=be(),k=ie(),S=d(!0),P=d(!1),$=d({title:"",message:"",callback:null}),N=d([]),v=d({label:"All",value:"all"}),C=d(""),b=d(1),z=d({page:1,totalPage:1,totalItems:0,itemsPerPage:10}),J=[[{key:"completed",label:"Completed",icon:"i-heroicons-check",callback:()=>{console.log("completed")}}],[{key:"uncompleted",label:"In Progress",icon:"i-heroicons-arrow-path",callback:()=>{console.log("uncompleted")}}]],V=async()=>{try{await j({page:b.value,per_page:z.value.itemsPerPage,status:v.value.value==="all"?"":v.value.value,search:C.value}).then(t=>{N.value=t.data.data.data.map((a,p)=>({id:p+1,user:{id:a.id,fullname:a.fullname,email:a.email,photo:a.photo,type:a.merchants[0].type},phone:K(a.phone??""),subscription:a.merchants[0].subscription_packages[0]??{},bank:{bank:a.merchants[0].bank,bankAccount:a.merchants[0].bank_account},CV:a.merchants[0].cv_url,portfolio:JSON.parse(a.merchants[0].portfolios),certificate:JSON.parse(a.merchants[0].certificates),status:a.merchants[0].status,actions:J})),z.value={page:t.data.data.current_page,totalPage:t.data.data.last_page,totalItems:t.data.data.total,itemsPerPage:t.data.data.per_page}})}catch(t){console.error("Error fetching facilitators:",t)}finally{S.value=!1}},K=t=>(t=t.replace(/\D/g,""),t.startsWith("0")?`62${t.slice(1)}`:t),T=t=>(console.log(t),new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),H=t=>t>1?t+" Months":t+" Month",M=t=>new Date(t)<new Date?"expired":new Date(t)<new Date(new Date().getTime()+7*24*60*60*1e3)?"near-expired":"valid",Q=(t,a)=>a&&t?"Trial":t?"Active":"Pending";ce(b,V);const A=()=>{V(b.value,v.value.value,C.value)},R=W(()=>{A()},500);function W(t,a,p){let _;return function(){const f=this,m=arguments,r=function(){_=null,t.apply(f,m)};clearTimeout(_),_=setTimeout(r,a)}}const x=t=>{t?window.open(t,"_blank"):k.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Link is empty!"})},w=t=>{navigator.clipboard.writeText(t),k.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},G=t=>t==="verified"?"blue":t==="pending"?"orange":"gray",O=(t,a,p,_,f)=>{$.value={title:t,content:a,confirmText:p,cancelText:_,callback:f},P.value=!0},L=async(t,a)=>{await q(t,a).then(()=>{P.value=!1,k.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"User status updated successfully!"}),V()}).catch(p=>{console.error("Error updating user status:",p),k.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Error updating user status!"})})};return re(()=>{V()}),(t,a)=>{const p=oe,_=ne,f=se,m=le,r=de,X=_e,U=me,B=fe,Y=he,Z=ge,ee=ue,te=ve;return o(),l("div",null,[n(ee,{name:"admin"},{default:s(()=>[i("div",xe,[n(f,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:s(()=>[i("h6",{class:"font-semibold"},c(Ke)),i("div",ye,[n(p,{options:[{label:"All",value:"all",color:"gray"},{label:"Verified",value:"verified",color:"blue"},{label:"Pending",value:"pending",color:"orange"}],modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:A,class:"max-w-[180px]"},null,8,["modelValue"]),n(_,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e),onInput:a[2]||(a[2]=e=>pe(R)())},null,8,["modelValue"])])]),_:1}),n(f,{ui:{body:{base:"flex flex-col gap-4"}}},{default:s(()=>[n(Y,{rows:N.value,loading:S.value,"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."}},{"phone-data":s(({row:e})=>[e.phone?(o(),g(r,{key:0,target:"_blank",size:"sm",color:"green",trailing:!1,onClick:u=>x(`https://wa.me/${e.phone}`)},{default:s(()=>[n(m,{name:"whatsapp",class:"text-white"}),h(" "+c(e.phone),1)]),_:2},1032,["onClick"])):(o(),l("span",ke," Kosong "))]),"user-data":s(({row:e})=>[i("div",Ce,[i("data",{class:"cursor-pointer",onClick:u=>x(e.user.photo)},[n(X,{src:e.user.photo,alt:e.user.fullname,size:"sm",variant:"rounded-full",imgClass:"object-cover"},null,8,["src","alt"])],8,Ve),i("div",Pe,[i("span",ze,[n(U,{size:"xs",label:e.user.type,color:e.user.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),i("span",Ue,c(e.user.fullname),1),i("span",De,c(e.user.email),1)])])]),"bank-data":s(({row:e})=>[e.bank.bank?(o(),l("div",Se,[i("div",$e,[i("span",Ne," Bank "+c(e.bank.bank),1),n(r,{size:"xs",variant:"outline",color:"blue",onClick:u=>w(e.bank.bankAccount),class:""},{default:s(()=>[n(m,{name:"copy",class:"text-xs"})]),_:2},1032,["onClick"])]),i("span",null,c(e.bank.bankAccount),1)])):(o(),l("span",Te," Kosong "))]),"status-data":s(({row:e})=>[n(U,{size:"xs",label:e.status,color:G(e.status),variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"type-data":s(({row:e})=>[n(U,{size:"xs",label:e.type,color:e.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"subscription-data":s(({row:e})=>[i("div",Me,[i("span",Ae,c(e.subscription.name)+" ( "+c(H(e.subscription.duration))+" ) ",1),i("span",null,c(Q(e.subscription.pivot.is_valid,e.subscription.pivot.is_trial)),1),e.subscription.pivot.is_valid?(o(),l("div",Oe,[M(e.subscription.pivot.valid_until)==="expired"?(o(),l("span",Le,[h(" Expired "),i("b",null," : "+c(T(e.subscription.pivot.valid_until)),1)])):(o(),l("span",{key:1,class:D(M(e.subscription.pivot.valid_until)==="near-expired"?"text-orange-500":"text-green-500")}," Valid Until : "+c(T(e.subscription.pivot.valid_until)),3))])):(o(),l("div",Be,[n(r,{variant:"soft",color:"blue",icon:"i-heroicons-document-check"},{default:s(()=>[h(" Verify Subscription ")]),_:1})]))])]),"CV-data":s(({row:e})=>[e.CV?(o(),g(r,{key:0,size:"sm",color:"accent",trailing:!1,onClick:u=>x(e.CV)},{default:s(()=>[n(m,{name:"file",class:"text-white"}),h(" Open CV ")]),_:2},1032,["onClick"])):(o(),l("span",Fe," No CV "))]),"portfolio-data":s(({row:e})=>[e.portfolio?(o(),l("div",{key:0,class:D(["flex gap-1 flex-col justify-center",e.portfolio.length===0?"items-start":"items-center"])},[(o(!0),l(F,null,I(e.portfolio,(u,y)=>(o(),g(r,{key:y,size:"sm",color:"accent",trailing:!1,onClick:ae=>x(u)},{default:s(()=>[n(m,{name:"file",class:"text-white"}),h(" Portfolio "+c(y+1),1)]),_:2},1032,["onClick"]))),128)),e.portfolio.length===0?(o(),l("span",Ie," No Portfolio ")):E("",!0)],2)):(o(),l("span",Ee," No Portfolio "))]),"certificate-data":s(({row:e})=>[e.certificate?(o(),l("div",{key:0,class:D(["flex gap-1 flex-col justify-center",e.certificate.length===0?"items-start":"items-center"])},[(o(!0),l(F,null,I(e.certificate,(u,y)=>(o(),g(r,{key:y,size:"sm",color:"accent",trailing:!1,onClick:ae=>x(u)},{default:s(()=>[n(m,{name:"file",class:"text-white"}),h(" Certificate "+c(y+1),1)]),_:2},1032,["onClick"]))),128)),e.certificate.length===0?(o(),l("span",je," No Certificate ")):E("",!0)],2)):(o(),l("span",qe," No Certificate "))]),"actions-data":s(({row:e})=>[i("div",Je,[e.status==="verified"?(o(),g(B,{key:0,text:"Deactive"},{default:s(()=>[n(r,{icon:"i-heroicons-trash",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:u=>{O("Hang On","Are you sure you want to deactivate this facilitator?","Deactivate","Cancel",()=>{L(e.user.id,"inactive")})}},null,8,["onClick"])]),_:2},1024)):(o(),g(B,{key:1,text:"Verify"},{default:s(()=>[n(r,{icon:"i-heroicons-check",size:"2xs",color:"emerald",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:u=>{O("Verify Facilitator","Are you sure you want to verify this facilitator?","Verify","Cancel",()=>{L(e.user.id,"verified")})}},null,8,["onClick"])]),_:2},1024))])]),_:1},8,["rows","loading"]),n(Z,{modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value=e),"page-count":1,total:z.value.totalPage},null,8,["modelValue","total"])]),_:1})])]),_:1}),n(te,{isOpen:P.value,data:$.value},null,8,["isOpen","data"])])}}};export{it as default};
