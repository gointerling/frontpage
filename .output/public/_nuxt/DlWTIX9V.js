import{_ as de}from"./BUi_qeTb.js";import{_ as ue}from"./Dio_-stA.js";import{_ as me}from"./C0iaWVfo.js";import{g as Q,r as m,o as c,c as d,a as e,b as r,t as n,n as w,v as Y,G as pe,H as fe,h as N,i as _e,I as R,j as o,m as M,w as y,d as j,J as xe,s as he,K as ge,E as ve}from"./YHoLL0X3.js";import{_ as X}from"./Dgy9y7hJ.js";import{_ as ye}from"./aD5ppIMD.js";import{_ as we}from"./1HRvfy48.js";import{_ as ke}from"./CguRu5bu.js";import{u as be}from"./Cq51cPD_.js";import{u as Ue}from"./Bfczp-_o.js";import{u as Fe}from"./B4FQj7DX.js";import{P as Se}from"./DfwPssY-.js";import{_ as $e}from"./C5JDtsdv.js";import{_ as Pe}from"./Bqg5oGJm.js";import"./VsYBf1dB.js";import"./BqzS4d7g.js";import"./jrZWrvwg.js";import"./dnmuA08p.js";const Ae=["accept"],je={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},Ce=e("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),Ve=[Ce],Be={key:1},De={class:"text-primary group-hover:text-white transition duration-200"},ze=e("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),Ie={key:2,class:"mt-2 text-gray-700 text-xs"},Oe={key:3,class:"mt-2 text-red-500 text-xs"},Te={__name:"FileUploadInline",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0},center:{type:Boolean,default:!1}},emits:["fileUploaded"],setup(b,{emit:B}){const{uploadFile:D,deleteFile:z}=be(),U=b,F=Q(),I=B,p=m(null),u=m(""),f=m(""),h=m(null),S=m(!1),A=()=>{p.value.click()},v=()=>{const l=p.value.files[0];l&&(u.value=l.name,U.maxSize&&l.size>U.maxSize?(f.value=`File size exceeds the limit of ${k(U.maxSize/1024/1024,2)} MB.`,u.value=""):(f.value="",s(l,`${U.title}_${l.name}`)))},$=()=>{p.value.value=null,u.value="",f.value="",O(h.value)},k=(l,x)=>+(Math.round(l+"e"+x)+"e-"+x),s=(l,x)=>{S.value=!0,D(l,x).then(_=>{S.value=!1,h.value=_.data.data.fileRecord,C(_.data.data.fileRecord.url),console.log("File uploaded:",_.data.data.fileRecord.url),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(_=>{console.error(_),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:P(_.response.data.error)})})},O=l=>{z(l.id).then(()=>{C(""),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(x=>{console.error(x),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:P(x.response.data.error)})})},C=l=>{I("fileUploaded",l)},P=l=>l.errors?l.errors[Object.keys(l.errors)[0]][0]:l.message;return(l,x)=>{const _=X;return c(),d("div",{class:Y(["file-upload inline-block",b.center?"flex flex-col items-center":""])},[e("input",{ref_key:"fileInput",ref:p,type:"file",accept:b.accept,class:"hidden",onChange:v},null,40,Ae),S.value?(c(),d("button",je,Ve)):(c(),d("div",Be,[u.value?w("",!0):(c(),d("button",{key:0,onClick:A,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),e("span",De," Upload "+n(b.title),1)])),u.value?(c(),d("button",{key:1,onClick:$,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),ze])):w("",!0)])),u.value&&b.isDisplayFile?(c(),d("p",Ie," Selected file: "+n(u.value),1)):w("",!0),f.value?(c(),d("p",Oe,n(f.value),1)):w("",!0)],2)}}},Ne=""+new URL("back-ads.DbAjkD-H.svg",import.meta.url).href,Re={class:"min-h-screen flex flex-col"},Me={key:1,class:"flex flex-col h-screen"},qe={key:0,class:"flex flex-col px-8 sm:px-40"},Ee={class:"flex flex-col gap-4 p-8 sm:px-32 rounded-md"},Le={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},He=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Name",-1),Ge={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Je=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Tagline",-1),We={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ke=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Description",-1),Qe={class:"w-full sm:w-10/12"},Ye=e("label",{class:"text-xs text-gray-500"},"Maks. 50 Words",-1),Xe={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ze=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Package",-1),et={class:"flex gap-1 items-center"},tt=e("span",{class:"inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":"true"},null,-1),st={class:"truncate"},ot={class:"flex justify-start gap-2 py-2 px-2"},at={class:""},nt={class:"flex flex-col"},lt={class:"truncate"},it={class:"truncate"},rt={class:"truncate"},ct={class:"truncate"},dt={class:"truncate"},ut={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},mt=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Upload Image",-1),pt={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-end"},ft={key:1},_t={class:"flex flex-col md:flex-row gap-8 p-8 sm:px-24 rounded-md w-full justify-center"},xt={class:"flex gap-4 flex-col"},ht=e("span",{class:"flex-grow font-medium"},"Preview",-1),gt=["src"],vt={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-between p-6 transition-opacity duration-300 ease-in-out opacity-0 hover:opacity-100 bg-gradient-to-r from-transparent via-transparent via-10% to-primary rounded-lg z-10"},yt={class:"w-full h-full"},wt={class:"flex justify-end"},kt={class:"flex flex-col justify-center items-end h-full"},bt={class:"h-full flex flex-col items-end justify-center pb-6"},Ut={class:"text-white text-xl font-bold text-right pb-4"},Ft={class:"text-white text-sm max-w-sm text-right"},St={key:0,class:"w-full flex items-start justify-start flex-col gap-1"},$t=e("span",{class:"flex-grow font-medium"},"Advertisement Detail",-1),Pt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2"},At=e("span",{class:"font-thin text-primary text-sm"}," Title ",-1),jt={class:"font-semibold text-primary text-lg"},Ct=e("span",{class:"font-thin text-primary text-sm"}," Tagline ",-1),Vt={class:"font-semibold text-primary text-lg"},Bt=e("span",{class:"font-thin text-primary text-sm"}," Package ",-1),Dt={class:"font-semibold text-primary text-lg"},zt={class:"text-primary text-sm"},It=e("span",{class:"font-thin text-primary text-sm"}," Status ",-1),Ot=e("span",{class:"font-thin text-primary text-sm"}," Valid Until ",-1),Tt={class:"font-semibold text-primary text-lg"},Nt={key:1,class:"w-full flex items-start justify-start flex-col gap-1"},Rt=e("span",{class:"flex-grow font-medium"},"Payment Detail",-1),Mt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2 flex-grow"},qt=e("span",{class:"font-thin text-primary text-sm"}," Amount to be transfer : ",-1),Et={class:"font-semibold text-primary text-lg"},Lt={class:"font-thin text-primary text-sm"},Ht={class:"font-bold text-primary text-md text-xl flex gap-2 items-center py-2 capitalize"},Gt={class:"uppercase"},Jt={class:"font-thin text-primary text-sm"},Wt={key:0,class:"flex gap-2"},Kt={key:2,class:"text-xs text-gray-500 max-w-xs"},fs={__name:"setup",setup(b){const{getAdsPackages:B,setMyAds:D,getAdsDetail:z,updateMyAdsProofOfPayment:U}=Ue(),{getSettingBank:F}=Fe(),I=pe(),p=fe(),u=Q();m(p.params.id);const f=m(!0),h=m(!1),S=m(!0),A=m(null),v=m("fill-data"),$=m([]),k=m(null),s=m({name:null,tagline:null,description:null,package:{},image_url:null,status:"pending"});N(()=>s.value.description,t=>{s.value.description=O(t,50)}),N(()=>v.value,t=>{I.push({query:{...p.query,section:t}})}),N(()=>s.value,()=>{S.value=!(s.value.name&&s.value.tagline&&s.value.description&&s.value.package&&s.value.image_url)},{deep:!0});const O=(t,a)=>{const g=t.split(/\s+/);return g.length>a?g.slice(0,a).join(" "):t},C=t=>JSON.parse(t).map(g=>g.name).join(", "),P=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),l=t=>{navigator.clipboard.writeText(t),u.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"Bank Account copied to clipboard!"})},x=t=>{s.value.image_url=t},_=async()=>{try{A.value=R("token").value.user||null}catch(t){console.error("Fetching user failed:",t)}},Z=()=>{R("token").value=null,A.value=null},ee=()=>{p.query.section?v.value=p.query.section:v.value="fill-data"},T=t=>t.errors?t.errors[Object.keys(t.errors)[0]][0]:t.message,q=t=>{switch(t){case"active":return{color:"green",text:"Active"};case"inactive":return{color:"gray",text:"Inactive"};case"pending":return{color:"orange",text:"Pending"};default:return{color:"gray",text:"Unknown"}}},te=async()=>{try{const{data:t}=await B();$.value=t.data.packages,s.value.package=$.value[0]}catch(t){console.error(t),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:T(t.response.data.error)})}},se=async()=>{try{const{data:t}=await F();k.value=t.data.setting}catch(t){console.error("Error fetching merchant orders:",t)}finally{f.value=!1}},E=async t=>{f.value=!0;try{const{data:a}=await z(t);s.value={...a.data.advertisement,package:$.value.find(g=>g.id===a.data.advertisement.package_id)},a.data.advertisement.payment_file_url&&a.data.advertisement.status==="pending"&&(h.value=!0)}catch(a){console.error("Error fetching ads detail:",a)}finally{f.value=!1}},oe=async()=>{await D({...s.value,package_id:s.value.package.id}).then(t=>{s.value.id=t.data.data.advertisement.id,p.query.transaction_id=t.data.data.advertisement.id,v.value="payment",u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Please continue to the payment process!"})}).catch(t=>{console.error(t),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:T(t.response.data.error)})})},ae=t=>{U(s.value.id,{payment_file_url:t}).then(()=>{u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Proof of payment uploaded successfully!"}),h.value=!0,E(s.value.id)}).catch(a=>{console.error(a),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:T(a.response.data.error)})})};return _e(async()=>{if(R("token").value&&await _(),ee(),await te(),await se(),p.query.section==="payment"){const t=p.query.transaction_id;await E(t)}f.value=!1}),(t,a)=>{var G,J,W;const g=de,ne=ue,le=me,V=he,L=X,ie=ye,re=we,H=ve,ce=ke;return c(),d("div",Re,[o(f)?(c(),M(Se,{key:0})):(c(),d("div",Me,[r($e,{user:o(A),onLogout:Z},null,8,["user"]),r(Pe,{"is-title-visible":!0,"banner-title":"Advertising Form on Gointerling Website",class:"min-h-[250px] pt-44 sm:pt-60"}),e("div",{class:"flex-grow p-6 lg:px-36 flex flex-col gap-6 bg-no-repeat bg-cover bg-bottom mt-8",style:xe({backgroundImage:`url(${o(Ne)})`})},[o(v)==="fill-data"?(c(),d("section",qe,[e("div",Ee,[e("div",Le,[He,r(g,{modelValue:o(s).name,"onUpdate:modelValue":a[0]||(a[0]=i=>o(s).name=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",Ge,[Je,r(g,{modelValue:o(s).tagline,"onUpdate:modelValue":a[1]||(a[1]=i=>o(s).tagline=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",We,[Ke,e("div",Qe,[r(ne,{modelValue:o(s).description,"onUpdate:modelValue":a[2]||(a[2]=i=>o(s).description=i),class:"w-full"},null,8,["modelValue"]),Ye])]),e("div",Xe,[Ze,r(le,{modelValue:o(s).package,"onUpdate:modelValue":a[3]||(a[3]=i=>o(s).package=i),options:o($),placeholder:"Select Package",class:"w-full sm:w-10/12"},{label:y(()=>[e("div",et,[tt,e("span",st,n(o(s).package.name),1)])]),option:y(({option:i})=>[e("div",ot,[e("div",at,[e("span",{class:Y([i.online?"bg-green-400":"bg-accent","inline-block h-2 w-2 flex-shrink-0 rounded-full"]),"aria-hidden":"true"},null,2)]),e("div",nt,[e("span",lt,n(i.name),1),e("span",it," Paket "+n(i.duration)+" Bulan ",1),e("span",rt,"Harga "+n(P(i.price)),1),e("span",ct," Ukuran "+n(i.size_x)+" x "+n(i.size_y),1),e("span",dt," Penayangan di "+n(C(i.route_json)),1)])])]),_:1},8,["modelValue","options"])]),e("div",ut,[mt,r(Te,{class:"w-full sm:w-10/12",title:"Ads Banner",accept:"images/*","max-size":"6291456",onFileUploaded:x})]),e("div",pt,[r(V,{class:"w-full sm:w-10/12 bg-accent",block:"",onClick:oe,disabled:o(S)},{default:y(()=>[j(" Continue ")]),_:1},8,["disabled"])])])])):w("",!0),o(v)==="payment"?(c(),d("section",ft,[e("div",_t,[e("div",xt,[ht,r(ie,{ui:{body:{padding:""}},class:"w-full sm:w-[600px] relative"},{default:y(()=>[e("img",{src:o(s).image_url,alt:"",class:"w-full h-full object-cover rounded-lg"},null,8,gt),e("div",vt,[e("div",yt,[e("div",wt,[e("button",{onClick:a[4]||(a[4]=(...i)=>t.cancel&&t.cancel(...i)),class:"text-white bg-none"},[r(L,{name:"x"})])]),e("div",kt,[e("div",bt,[e("h6",Ut,n(o(s).tagline),1),e("p",Ft,n(o(s).description),1)])])])])]),_:1})]),o(s).status==="active"?(c(),d("div",St,[$t,e("div",Pt,[At,e("h6",jt,n(o(s).name),1),Ct,e("h6",Vt,n(o(s).tagline),1),Bt,e("h6",Dt,n(o(s).package.name)+" ("+n(o(s).package.duration)+" Bulan) ",1),e("span",zt,n(P(o(s).package.price)),1),It,r(re,{color:q(o(s).status).color,variant:"soft"},{default:y(()=>[j(n(q(o(s).status).text),1)]),_:1},8,["color"]),Ot,e("h6",Tt,n(o(s).valid_until_date?new Date(o(s).valid_until_date).toLocaleDateString():"-"),1)])])):(c(),d("div",Nt,[Rt,e("div",Mt,[qt,e("h6",Et,n(P(o(s).package.price)),1),e("span",Lt,n((G=o(k))==null?void 0:G.bank_account_name)+" Account ",1),e("h6",Ht,[j(n((J=o(k))==null?void 0:J.bank_account)+" ",1),e("b",Gt,"("+n((W=o(k))==null?void 0:W.bank)+")",1),r(V,{size:"xs",variant:"outline",color:"blue",onClick:a[5]||(a[5]=i=>{var K;return l((K=o(k))==null?void 0:K.bank_account)}),class:""},{default:y(()=>[r(L,{name:"copy",class:"text-lg"})]),_:1})]),e("span",Jt,n(o(h)?"Re":"")+" Upload Proof of Payment ",1),o(h)?(c(),d("div",Wt,[r(V,{color:"primary",class:"text-white py-3 rounded-lg my-1",onClick:a[6]||(a[6]=i=>h.value=!1)},{default:y(()=>[r(H,{name:"i-heroicons-arrow-path"}),j(" Reupload ")]),_:1}),o(h)?(c(),M(V,{key:0,class:"text-white py-3 rounded-lg my-1 bg-accent hover:bg-accent-700",onClick:a[7]||(a[7]=i=>("navigateTo"in t?t.navigateTo:o(ge))({name:"my-client-orders",query:{section:"ads-history"}}))},{default:y(()=>[r(H,{name:"i-heroicons-megaphone"}),j(" Other Ads History ")]),_:1})):w("",!0)])):(c(),M(ce,{key:1,title:"Proof of Payment",accept:"*","max-size":"6291456",onFileUploaded:ae,class:"my-1"})),o(s).payment_file_url?(c(),d("span",Kt," *Your transaction will be processed. Please wait for the verification process. ")):w("",!0)])]))])])):w("",!0)],4)]))])}}};export{fs as default};
