import{_ as le}from"./BmZ1ThBO.js";import{g as ne,x as ie,L as re,r as p,D as P,h as ce,i as de,B as $,c,Y as ue,a2 as _e,a as e,b as t,F as S,m as U,k as A,w as i,q as m,l as y,s as me,o as n,t as d,n as T,d as h,a0 as fe,v as pe}from"./BqGgLAbD.js";import{_ as he}from"./Cv-5lGWN.js";import{_ as xe}from"./fMf9s-QS.js";import{_ as ve}from"./YxEVfjF3.js";import{_ as ge}from"./BGcfErfh.js";import{P as ye}from"./Cz7ufH-W.js";import{_ as be}from"./C7rORRNJ.js";import{_ as ke}from"./FiNmAi7i.js";import{u as we}from"./CFC3nTEj.js";import"./Gzy-iuwg.js";import"./CG0a7XMq.js";import"./Cu9O3nsD.js";import"./CjHJVWap.js";import"./HhIP9DG2.js";import"./CGwzmjpp.js";const Ce={class:"w-100 flex flex-col items-center"},De={class:"flex justify-between items-stretch w-10/12 my-16 gap-16 px-8"},$e={class:"w-2/12"},Fe=e("h6",{class:"font-semibold"},"Client Dashboard",-1),je={class:"flex flex-col items-start mt-4"},Oe={class:"text-md text-primary"},Se={key:0,class:"w-10/12"},Ue={class:"flex gap-2 items-center mb-3"},Te=e("h6",{class:"font-semibold"},"Detail Order",-1),Ie={class:"flex justify-between items-center"},Me={class:"flex items-center gap-2 capitalize"},Ne={class:"font-semibold"},ze={class:"flex justify-between items-center gap-2"},Le={class:"capitalize"},Pe={class:"flex gap-3 justify-between items-center px-2"},Ae={class:"flex gap-3 w-7/12"},Be={class:"flex flex-col gap-1"},Ve={class:"font-semibold text-primary"},Ee={class:""},Re={class:"text-sm text-gray-700"},Ye=e("br",null,null,-1),qe={class:"text-sm text-gray-700"},He={key:0},Je={key:0,class:"mt-4 flex flex-col items-end gap-2"},We=e("span",{class:"font-semibold text-sm pb-1"}," Download Result ",-1),Ge={key:1,class:"mt-4 flex flex-col items-end gap-2"},Ke=e("span",{class:"font-semibold text-sm pb-1"},"Meeting Link",-1),Qe={key:1,class:"flex flex-col text-right"},Xe=e("span",{class:"font-thin text-primary text-md"}," Amount to be transfer : ",-1),Ze={class:"font-semibold text-primary text-lg my-1"},et=e("span",{class:"font-thin text-primary text-md"}," Gointering Account ",-1),tt={class:"font-bold text-primary text-md text-xl py-1 flex gap-2 items-center"},st=e("img",{src:"",alt:""},null,-1),ot={key:2,class:"flex flex-col text-right items-end"},at=e("span",{class:"font-semibold text-xl pb-2"},"Work In Progress",-1),lt=e("p",{class:"w-7/12 text-gray-600 text-sm"}," Your order has been received and is now being processed. Thank you for your trust in using our services. ",-1),nt={key:0,class:"mt-4 flex flex-col gap-2"},it=e("span",{class:"font-semibold text-sm pb-1"},"Meeting Link",-1),rt={class:"mt-6"},ct=e("h6",{class:"font-semibold mb-2"},"Discussions",-1),dt={key:0,class:"pb-4"},ut={class:"flex gap-2 items-center"},_t={class:"flex flex-col items-start gap-1"},mt={class:"font-semibold"},ft=e("span",{class:"capitalize"}," Faciliator ",-1),pt={class:"flex text-gray-700 my-3 text-sm"},ht={class:"text-gray-700 text-sm"},xt={key:1,class:"pb-4"},vt={class:"flex gap-2 items-center"},gt=e("div",{class:"flex flex-col items-start gap-1"},[e("span",{class:"font-semibold text-primary"}," You ")],-1),yt={class:"flex text-gray-700 my-3 text-sm"},bt={class:"text-gray-700 text-sm"},kt={class:"flex justify-end border-t border-1 pt-2 gap-2"},Bt={__name:"[id]",setup(wt){const w=ne(),B=ie(),I=re(),{getDetailOrder:V,updateMyOrder:E}=we(),R=[{key:"order-history",label:"Order History",icon:"user-circle",scope:"all"}],Y=p({title:"",content:"",confirmText:"",cancelText:"",callback:null}),F=p(!0),q=p(!1),C=p("order-history"),f=p({fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}),M=p([]),j=p(3),b=p([]),v=p({user:{fullname:"You",photo:"/images/avatar.jpg"},message:"",time:new Date().toISOString(),file_url:"",other_link:"",is_facilitator:!1}),H=P(()=>{if(!f.value)return[];const s=f.value.is_admin??!1,l=f.value.is_facilitator??!1;return R.filter(u=>u.scope==="all"||u.scope==="admin"&&s||u.scope==="merchant"&&l)}),J=P(()=>b.value.slice(-(j.value??3))),N=s=>{switch(s){case"completed":return{color:"green",text:"Completed"};case"paid":return{color:"blue",text:"In Progress"};case"pending":return{color:"violet",text:"Pending"};case"waitingpaid":return{color:"orange",text:"Waiting Payment"};case"failed":return{color:"red",text:"Failed"};default:return{color:"gray",text:"Unknown"}}},W=s=>{navigator.clipboard.writeText(s),w.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},k=s=>{window.open(s,"_blank")},G=s=>{I.push(s)},z=s=>{const l=new Date,u=new Date(s),r=Math.floor((l-u)/1e3),_={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};for(const g in _){const x=Math.floor(r/_[g]);if(x>=1)return x===1?`${x} ${g} ago`:`${x} ${g}s ago`}return"just now"},K=()=>{console.log("Logging out..."),$("token").value=null,f.value={fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}},Q=s=>{try{return JSON.parse(s)}catch{return s}},X=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),L=async()=>{const s=B.params.id;try{const{data:l}=await V(s);M.value=[l.data.order],console.log(l.data.order.comment_json),b.value=Q(l.data.order.comment_json)??[]}catch(l){console.error("Fetching orders failed:",l)}},Z=s=>{console.log("File uploaded:",s),v.value.file_url=s};ce(()=>C.value,s=>{s==="service"&&$("token").value.user.merchant_status==="pending"&&I.push({name:"my-merchant-status"})});const ee=async()=>{try{f.value=$("token").value.user||null,v.value.user={fullname:f.value.fullname,photo:f.value.photo}}catch(s){console.error("Fetching user failed:",s)}},te=async(s,l)=>{const u=b.value??[];if(!l.message&&l.file_url&&(l.message="Here I attached a file."),!l.message&&!l.file_url){w.add({title:"Failed!",color:"red",icon:"i-heroicons-x-circle",description:"Comment message is required!"});return}u.push(l);try{const{data:r}=await E(s,{comment_json:u});w.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Order updated successfully!"}),await L(),v.value={user:{fullname:f.value.fullname,photo:f.value.photo},message:"",time:new Date().toISOString(),file_url:"",other_link:"",is_facilitator:!1}}catch(r){console.error("Updating order failed:",r),w.add({title:"Failed!",color:"red",icon:"i-heroicons-x-circle",description:"Failed to update order!"})}};return de(async()=>{$("token").value&&(await ee(),await L()),F.value=!1,window.scrollTo({top:0,behavior:"smooth"})}),(s,l)=>{const u=le,r=me,_=fe,g=he,x=pe,D=xe,se=ve,oe=ge;return n(),c("div",null,[ue(e("div",Ce,[t(be,{user:f.value,onLogout:K,class:"w-full"},null,8,["user"]),e("div",De,[e("div",$e,[Fe,e("div",je,[(n(!0),c(S,null,U(A(H),(o,O)=>(n(),y(r,{key:O,block:"",class:T(["py-3 px-3.5 flex justify-start bg-white hover:bg-[#FDF1EE] shadow-none",C.value===o.key?"bg-[#FDF1EE]":"bg-white"]),onClick:a=>C.value=o.key},{default:i(()=>[t(u,{name:o.icon,class:"text-2xl text-primary"},null,8,["name"]),e("span",Oe,d(o.label),1)]),_:2},1032,["class","onClick"]))),128))])]),C.value==="order-history"?(n(),c("div",Se,[e("div",Ue,[t(r,{variant:"link",onClick:l[0]||(l[0]=o=>G({name:"my-client-orders"}))},{default:i(()=>[t(u,{name:"chevron-left"})]),_:1}),Te]),(n(!0),c(S,null,U(M.value,(o,O)=>(n(),y(D,{key:O,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}},class:"p-2"},{header:i(()=>[e("div",Ie,[e("div",Me,[t(_,{name:"i-heroicons-language"}),e("span",Ne,d(o.merchant.type),1)]),e("div",ze,[t(g,{variant:"soft",color:N(o.order_status).color},{default:i(()=>[e("span",Le,d(N(o.order_status).text),1)]),_:2},1032,["color"]),t(r,{variant:"link"},{default:i(()=>[t(u,{name:"dots",class:"text-md text-primary"})]),_:1})])])]),default:i(()=>[e("div",Pe,[e("div",Ae,[e("div",Be,[t(x,{alt:o.merchant_user.fullname,src:o.merchant_user.photo,size:"xl",imgClass:"object-cover",class:"mb-2"},null,8,["alt","src"]),e("span",Ve,d(o.merchant_user.fullname),1),e("div",Ee,[e("span",Re,[h(d(o.service.name)+" Service ",1),Ye]),e("span",qe," ("+d(o.language_source.name)+" - "+d(o.language_destination.name)+") ",1)])])]),o.order_status==="completed"?(n(),c("div",He,[o.result_file_url?(n(),c("div",Je,[We,t(r,{color:"primary",class:"text-white",onClick:a=>k(o.result_file_url)},{default:i(()=>[t(_,{name:"i-heroicons-arrow-down-tray"}),h(" Download ")]),_:2},1032,["onClick"])])):m("",!0),o.meet_url?(n(),c("div",Ge,[Ke,t(r,{color:"primary",onClick:a=>k(o.meet_url)},{default:i(()=>[t(_,{name:"i-heroicons-video-camera"}),h(" Open Meeting Url ")]),_:2},1032,["onClick"])])):m("",!0)])):m("",!0),o.order_status==="waitingpaid"?(n(),c("div",Qe,[Xe,e("h6",Ze,d(X(o.price)),1),et,e("h6",tt,[h(d(o.merchant.bank_account)+" (BCA) ",1),t(r,{size:"xs",variant:"outline",color:"blue",onClick:a=>W(o.merchant.bank_account),class:""},{default:i(()=>[t(u,{name:"copy",class:"text-lg"})]),_:2},1032,["onClick"])]),st])):m("",!0),o.order_status==="paid"?(n(),c("div",ot,[at,lt,o.meet_url?(n(),c("div",nt,[it,t(r,{color:"primary",onClick:a=>k(o.meet_url)},{default:i(()=>[t(_,{name:"i-heroicons-video-camera"}),h(" Open Meeting Url ")]),_:2},1032,["onClick"])])):m("",!0)])):m("",!0)]),e("div",rt,[ct,j.value<b.value.length?(n(),y(r,{key:0,block:"",color:"primary",variant:"soft",class:"my-4 bg-blue-100 hover:bg-blue-200",onClick:l[1]||(l[1]=a=>j.value=b.value.length)},{default:i(()=>[t(_,{name:"i-heroicons-chat-bubble-oval-left-ellipsis"}),h(" Load Previous Comments ")]),_:1})):m("",!0),(n(!0),c(S,null,U(A(J),a=>(n(),c("div",{key:a},[a.is_facilitator?(n(),c("div",dt,[t(D,{ui:{body:{base:"w-full",padding:"p-4 sm:p-4"}},class:"flex gap-4 items-center w-full"},{default:i(()=>[e("div",ut,[t(x,{alt:a.user.fullname,src:a.user.photo,size:"md",imgClass:"object-cover"},null,8,["alt","src"]),e("div",_t,[e("span",mt,d(a.user.fullname),1),t(g,{variant:"soft",size:"xs",color:"blue"},{default:i(()=>[ft]),_:1})])]),e("div",pt,d(a.message),1),e("div",{class:T(["flex items-center",a.file_url?"justify-between":"justify-end"])},[a.file_url?(n(),y(r,{key:0,color:"green",variant:"soft",onClick:ae=>k(a.file_url)},{default:i(()=>[t(_,{name:"i-heroicons-arrow-down-tray"}),h(" Attached File ")]),_:2},1032,["onClick"])):m("",!0),e("span",ht,d(z(new Date(a.time))),1)],2)]),_:2},1024)])):(n(),c("div",xt,[t(D,{ui:{body:{base:"w-full",padding:"p-4 sm:p-4"}},class:"flex gap-4 items-center w-ful bg-blue-50"},{default:i(()=>[e("div",vt,[t(x,{alt:a.user.fullname,src:a.user.photo,size:"md",imgClass:"object-cover"},null,8,["alt","src"]),gt]),e("div",yt,d(a.message),1),e("div",{class:T(["flex items-center",a.file_url?"justify-between":"justify-end"])},[a.file_url?(n(),y(r,{key:0,color:"green",variant:"soft",onClick:ae=>k(a.file_url)},{default:i(()=>[t(_,{name:"i-heroicons-arrow-down-tray"}),h(" Attached File ")]),_:2},1032,["onClick"])):m("",!0),e("span",bt,d(z(new Date(a.time),{addSuffix:!0})),1)],2)]),_:2},1024)]))]))),128)),t(D,{ui:{body:{base:"w-full",padding:"p-4 sm:p-2"}},class:"flex gap-4 items-center w-full"},{default:i(()=>[t(se,{modelValue:v.value.message,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value.message=a),class:"w-full mb-2",placeholder:"Add Comment...",variant:"none"},null,8,["modelValue"]),e("div",kt,[t(ke,{"is-display-file":!1,accept:"*","max-size":"6291456",onFileUploaded:Z}),t(r,{color:"primary",onClick:a=>te(o.id,v.value)},{default:i(()=>[t(_,{name:"i-heroicons-paper-airplane"}),h(" Send ")]),_:2},1032,["onClick"])])]),_:2},1024)])]),_:2},1024))),128))])):m("",!0)])],512),[[_e,!F.value]]),F.value?(n(),y(ye,{key:0})):m("",!0),t(oe,{isOpen:q.value,data:Y.value},null,8,["isOpen","data"])])}}};export{Bt as default};
