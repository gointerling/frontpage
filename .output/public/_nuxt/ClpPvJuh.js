import{_ as H}from"./CAYk7iLE.js";import{g as J,x as Q,V as q,r,G,h as W,i as Y,B as _,c as p,Y as K,a2 as X,a as t,b as o,F as k,m as w,k as C,t as n,w as i,q as F,l as g,o as c,n as Z,a3 as ee,d as S,s as te,a0 as se,v as ae}from"./CLq9dtKI.js";import{_ as oe}from"./Dog-sPf1.js";import{_ as le}from"./C-ptd64V.js";import{_ as ne}from"./DVo6AouJ.js";import{_ as ie}from"./BjdPyee9.js";import{_ as re}from"./BKODF5iY.js";import{P as ce}from"./DnaLCT-G.js";import{_ as ue}from"./mHiK_4MC.js";import{u as de}from"./CSpRQf8A.js";import"./DgddTOVK.js";import"./WFOJnoRW.js";import"./CwovwDvV.js";import"./CaEY2f_t.js";const me={class:"w-100 flex flex-col items-center"},_e={class:"flex justify-between items-stretch w-10/12 my-16 gap-16 px-8"},pe={class:"w-2/12"},fe=t("h6",{class:"font-semibold"},"Client Dashboard",-1),he={class:"flex flex-col items-start mt-4"},ve={class:"text-md text-primary"},ge={key:0,class:"w-10/12"},xe={class:"font-semibold mb-3"},ye={class:"flex gap-2 mb-4 justify-between"},be={class:"flex flex-col gap-4"},ke={class:"flex justify-between items-center"},we={class:"flex items-center gap-2 capitalize"},Ce={class:"font-semibold"},Fe={class:"flex justify-between items-center gap-2"},Se={class:"capitalize"},Oe={class:"flex gap-3 justify-between items-center"},Ue={class:"flex gap-3"},Ve={class:""},Ie={class:"flex flex-col"},Me={class:"font-semibold text-primary"},De={class:"flex gap-2 text-xs text-gray-700"},Te=t("span",null,"x 1",-1),Ne={class:"font-semibold text-primary text-md"},Pe={class:"flex flex-col"},Ke={__name:"index",setup($e){J(),Q();const O=q(),{getMyOrders:U}=de();r(null);const V=[{key:"order-history",label:"Order History",icon:"user-circle",scope:"all"}],I=r({title:"",content:"",confirmText:"",cancelText:"",callback:null}),f=r(!0),M=r(!1),d=r("order-history"),a=r({fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}),h=r([]),D=G(()=>{if(!a.value)return[];const e=a.value.is_admin??!1,l=a.value.is_facilitator??!1;return V.filter(u=>u.scope==="all"||u.scope==="admin"&&e||u.scope==="merchant"&&l)}),x=e=>{switch(e){case"completed":return{color:"green",text:"Completed"};case"paid":return{color:"blue",text:"In Progress"};case"pending":return{color:"orange",text:"Waiting to be paid"};case"failed":return{color:"red",text:"Failed"};default:return{color:"gray",text:"Unknown"}}},T=()=>{console.log("Logging out..."),_("token").value=null,a.value={fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}},y=e=>{try{return JSON.parse(e)}catch{return e}},N=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e),P=async()=>{try{a.value=_("token").value.user||null,payload.value={fullname:a.value.fullname,email:a.value.email,phone:a.value.phone,address:a.value.address,personal_description:a.value.personal_description,photo:a.value.photo,main_skills:y(a.value.main_skills)??[],additional_skills:y(a.value.additional_skills)??[]}}catch(e){console.error("Fetching user failed:",e)}},$=async()=>{try{const{data:e}=await U();h.value=e.data.orders}catch(e){console.error("Fetching orders failed:",e)}};return W(()=>d.value,e=>{if(e==="service"){const l=_("token").value.user;console.log(l.merchant_status),l.merchant_status==="pending"&&O.push({name:"my-merchant-status"})}}),Y(async()=>{_("token").value&&(await P(),await $()),f.value=!1,window.scrollTo({top:0,behavior:"smooth"})}),(e,l)=>{const u=H,m=te,j=oe,B=le,L=se,z=ne,E=ae,b=ie,A=re;return c(),p("div",null,[K(t("div",me,[o(ue,{user:a.value,onLogout:T,class:"w-full"},null,8,["user"]),t("div",_e,[t("div",pe,[fe,t("div",he,[(c(!0),p(k,null,w(C(D),(s,v)=>(c(),g(m,{key:v,block:"",class:Z(["py-3 px-3.5 flex justify-start bg-white hover:bg-[#FDF1EE] shadow-none",d.value===s.key?"bg-[#FDF1EE]":"bg-white"]),onClick:R=>d.value=s.key},{default:i(()=>[o(u,{name:s.icon,class:"text-2xl text-primary"},null,8,["name"]),t("span",ve,n(s.label),1)]),_:2},1032,["class","onClick"]))),128))])]),d.value==="order-history"?(c(),p("div",ge,[t("h6",xe," My Order History ("+n(h.value.length??0)+") ",1),t("div",ye,[o(j,{options:[{label:"All",value:"",color:"gray"},{label:"Completed",value:"completed",color:"blue"},{label:"In Progress",value:"paid",color:"green"},{label:"Pending",value:"pending",color:"orange"},{label:"Failed",value:"failed",color:"red"}],modelValue:e.selectedStatus,"onUpdate:modelValue":l[0]||(l[0]=s=>e.selectedStatus=s),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:e.filterFacilitators,class:"max-w-[180px]"},null,8,["modelValue","onChange"]),o(B,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:e.searchQuery,"onUpdate:modelValue":l[1]||(l[1]=s=>e.searchQuery=s),onInput:l[2]||(l[2]=s=>e.onSearchChange())},null,8,["modelValue"])]),o(b,null,{default:i(()=>[t("div",be,[(c(!0),p(k,null,w(h.value,(s,v)=>(c(),g(b,{key:v,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}}},{header:i(()=>[t("div",ke,[t("div",we,[o(L,{name:"i-heroicons-language"}),t("span",Ce,n(s.merchant.type),1)]),t("div",Fe,[o(z,{variant:"soft",color:x(s.order_status).color},{default:i(()=>[t("span",Se,n(x(s.order_status).text),1)]),_:2},1032,["color"]),o(m,{variant:"link"},{default:i(()=>[o(u,{name:"dots",class:"text-md text-primary"})]),_:1})])])]),default:i(()=>[t("div",Oe,[t("div",Ue,[t("div",Ve,[o(E,{alt:s.merchant_user.fullname,src:s.merchant_user.photo,size:"lg",imgClass:"object-cover"},null,8,["alt","src"])]),t("div",Ie,[t("span",Me,n(s.merchant_user.fullname),1),t("div",De,[t("span",null,n(s.service.name),1),t("span",null,"("+n(s.language_source.name)+" - "+n(s.language_destination.name)+")",1),Te]),t("span",Ne,n(N(s.price)),1)])]),o(m,{color:"primary",class:"text-white mr-4",onClick:R=>("navigateTo"in e?e.navigateTo:C(ee))({name:"my-client-orders-id",params:{id:s.id}})},{default:i(()=>[S(" Show Detail ")]),_:2},1032,["onClick"])])]),_:2},1024))),128)),t("div",Pe,[o(m,{block:"",onClick:e.loadMore,class:"mt-4 bg-accent"},{default:i(()=>[S(" Load More ")]),_:1},8,["onClick"])])])]),_:1})])):F("",!0)])],512),[[X,!f.value]]),f.value?(c(),g(ce,{key:0})):F("",!0),o(A,{isOpen:M.value,data:I.value},null,8,["isOpen","data"])])}}};export{Ke as default};
