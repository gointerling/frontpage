import{_ as q}from"./CAYk7iLE.js";import{g as H,x as W,V as Y,r as d,G as K,h as Q,i as X,B as m,c as p,Y as Z,a2 as ee,a as e,b as a,F as D,m as O,k as te,w as c,q as v,l as f,s as se,o as r,t as l,n as oe,d as g,a0 as ae,v as ne}from"./CLq9dtKI.js";import{_ as le}from"./DVo6AouJ.js";import{_ as ie}from"./BjdPyee9.js";import{_ as ce}from"./BKODF5iY.js";import{P as re}from"./DnaLCT-G.js";import{_ as de}from"./mHiK_4MC.js";import{u as ue}from"./CSpRQf8A.js";import"./CaEY2f_t.js";import"./DgddTOVK.js";import"./WFOJnoRW.js";const _e={class:"w-100 flex flex-col items-center"},me={class:"flex justify-between items-stretch w-10/12 my-16 gap-16 px-8"},pe={class:"w-2/12"},fe=e("h6",{class:"font-semibold"},"Client Dashboard",-1),he={class:"flex flex-col items-start mt-4"},xe={class:"text-md text-primary"},ve={key:0,class:"w-10/12"},ge={class:"flex gap-2 items-center mb-3"},ye=e("h6",{class:"font-semibold"},"Detail Order",-1),ke={class:"flex justify-between items-center"},be={class:"flex items-center gap-2 capitalize"},we={class:"font-semibold"},Ce={class:"flex justify-between items-center gap-2"},De={class:"capitalize"},Oe={class:"flex gap-3 justify-between items-center px-2"},Fe={class:"flex gap-3"},Ne={class:"flex flex-col gap-1"},Te={class:"font-semibold text-primary"},$e={class:""},Be={class:"text-sm text-gray-700"},Ie=e("br",null,null,-1),Se={class:"text-sm text-gray-700"},Ue={class:"flex flex-col text-right"},je=e("span",{class:"font-thin text-primary text-md"}," Amount to be transfer : ",-1),ze={class:"font-semibold text-primary text-lg my-1"},Ae=e("span",{class:"font-thin text-primary text-md"}," Gointering Account ",-1),Ee={class:"font-bold text-primary text-md text-xl py-1 flex gap-2 items-center"},Le=e("img",{src:"",alt:""},null,-1),Xe={__name:"[id]",setup(Pe){const F=H(),N=W(),y=Y(),{getDetailOrder:T}=ue();d(null);const $=[{key:"order-history",label:"Order History",icon:"user-circle",scope:"all"}],B=d({title:"",content:"",confirmText:"",cancelText:"",callback:null}),h=d(!0),I=d(!1),_=d("order-history"),o=d({fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}),k=d([]),S=K(()=>{if(!o.value)return[];const t=o.value.is_admin??!1,n=o.value.is_facilitator??!1;return $.filter(i=>i.scope==="all"||i.scope==="admin"&&t||i.scope==="merchant"&&n)}),b=t=>{switch(t){case"completed":return{color:"green",text:"Completed"};case"paid":return{color:"blue",text:"In Progress"};case"pending":return{color:"orange",text:"Waiting to be paid"};case"failed":return{color:"red",text:"Failed"};default:return{color:"gray",text:"Unknown"}}},U=t=>{navigator.clipboard.writeText(t),F.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},j=t=>{window.open(t,"_blank")},z=t=>{y.push(t)},A=()=>{console.log("Logging out..."),m("token").value=null,o.value={fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}},w=t=>{try{return JSON.parse(t)}catch{return t}},E=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),L=async()=>{try{o.value=m("token").value.user||null,payload.value={fullname:o.value.fullname,email:o.value.email,phone:o.value.phone,address:o.value.address,personal_description:o.value.personal_description,photo:o.value.photo,main_skills:w(o.value.main_skills)??[],additional_skills:w(o.value.additional_skills)??[]}}catch(t){console.error("Fetching user failed:",t)}},P=async()=>{const t=N.params.id;console.log(t);try{const{data:n}=await T(t);k.value=[n.data.order]}catch(n){console.error("Fetching orders failed:",n)}};return Q(()=>_.value,t=>{t==="service"&&m("token").value.user.merchant_status==="pending"&&y.push({name:"my-merchant-status"})}),X(async()=>{m("token").value&&(await L(),await P()),h.value=!1,window.scrollTo({top:0,behavior:"smooth"})}),(t,n)=>{const i=q,u=se,R=ae,V=le,M=ne,G=ie,J=ce;return r(),p("div",null,[Z(e("div",_e,[a(de,{user:o.value,onLogout:A,class:"w-full"},null,8,["user"]),e("div",me,[e("div",pe,[fe,e("div",he,[(r(!0),p(D,null,O(te(S),(s,x)=>(r(),f(u,{key:x,block:"",class:oe(["py-3 px-3.5 flex justify-start bg-white hover:bg-[#FDF1EE] shadow-none",_.value===s.key?"bg-[#FDF1EE]":"bg-white"]),onClick:C=>_.value=s.key},{default:c(()=>[a(i,{name:s.icon,class:"text-2xl text-primary"},null,8,["name"]),e("span",xe,l(s.label),1)]),_:2},1032,["class","onClick"]))),128))])]),_.value==="order-history"?(r(),p("div",ve,[e("div",ge,[a(u,{variant:"link",onClick:n[0]||(n[0]=s=>z({name:"my-client-orders"}))},{default:c(()=>[a(i,{name:"chevron-left"})]),_:1}),ye]),(r(!0),p(D,null,O(k.value,(s,x)=>(r(),f(G,{key:x,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}},class:"p-2"},{header:c(()=>[e("div",ke,[e("div",be,[a(R,{name:"i-heroicons-language"}),e("span",we,l(s.merchant.type),1)]),e("div",Ce,[a(V,{variant:"soft",color:b(s.order_status).color},{default:c(()=>[e("span",De,l(b(s.order_status).text),1)]),_:2},1032,["color"]),a(u,{variant:"link"},{default:c(()=>[a(i,{name:"dots",class:"text-md text-primary"})]),_:1})])])]),default:c(()=>[e("div",Oe,[e("div",Fe,[e("div",Ne,[a(M,{alt:s.merchant_user.fullname,src:s.merchant_user.photo,size:"xl",imgClass:"object-cover",class:"mb-2"},null,8,["alt","src"]),e("span",Te,l(s.merchant_user.fullname),1),e("div",$e,[e("span",Be,[g(l(s.service.name)+" Service ",1),Ie]),e("span",Se," ("+l(s.language_source.name)+" - "+l(s.language_destination.name)+") ",1)])])]),s.order_status==="completed"?(r(),f(u,{key:0,color:"primary",class:"text-white mr-4",onClick:C=>j(`https://gointering.com/api/v1/orders/${s.id}/download-result`)},{default:c(()=>[g(" Download Result ")]),_:2},1032,["onClick"])):v("",!0),e("div",Ue,[je,e("h6",ze,l(E(s.price)),1),Ae,e("h6",Ee,[g(l(s.merchant.bank_account)+" (BCA) ",1),a(u,{size:"xs",variant:"outline",color:"blue",onClick:C=>U(s.merchant.bank_account),class:""},{default:c(()=>[a(i,{name:"copy",class:"text-lg"})]),_:2},1032,["onClick"])]),Le])])]),_:2},1024))),128))])):v("",!0)])],512),[[ee,!h.value]]),h.value?(r(),f(re,{key:0})):v("",!0),a(J,{isOpen:I.value,data:B.value},null,8,["isOpen","data"])])}}};export{Xe as default};
