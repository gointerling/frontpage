import{_ as Y}from"./DvumrKrj.js";import{_ as Z}from"./DGrq4f1g.js";import{_ as ee}from"./G_bPuirm.js";import{_ as te}from"./CGyI2hQu.js";import{g as ae,r as u,h as oe,i as le,c as s,b as o,w as l,j as ne,o as n,a as i,t as d,k as se,l as g,d as V,n as B,F,m as I,q as L,s as ie,v as ce}from"./BTSDszUJ.js";import{_ as re}from"./CDkhUFr5.js";import{_ as ue,a as de}from"./BvyGCBkE.js";import{_ as pe}from"./veiQDZO_.js";import{_ as me}from"./B9XNv89N.js";import{u as _e}from"./CJl_SR69.js";import"./ZcxYWiyP.js";import"./QMTWwr3q.js";import"./BzSNmRo5.js";import"./P5m1VOJr.js";import"./7ZUwepPQ.js";import"./BYiaUImn.js";const fe={class:"w-full pt-0 p-6 flex flex-col gap-2"},ge={class:"flex gap-2"},he={key:1,class:"text-gray-300"},ve={class:"flex gap-3 items-center"},ye={class:"flex flex-col"},ke={class:"font-semibold text-primary"},xe={class:"text-sm text-gray-600"},be={key:0,class:"flex gap-1 flex-col"},Ce={class:"flex gap-1 items-center"},Ve={class:"font-semibold text-primary"},Pe={key:1,class:"text-gray-300"},Ue={key:1,class:"text-gray-300"},ze={key:0,class:"text-gray-300"},$e={key:1,class:"text-gray-300"},Ne={key:0,class:"text-gray-300"},Se={key:1,class:"text-gray-300"},Te={class:"flex gap-1"},Ae="Users List",We={__name:"users",setup(Me){const{getMerchants:j,updateMerchantStatus:w}=_e(),P=ae(),z=u(!0),U=u(!1),$=u({title:"",message:"",callback:null}),N=u([]),h=u({label:"All",value:"all"}),k=u(""),v=u(1),x=u({page:1,totalPage:1,totalItems:0,itemsPerPage:10}),D=[[{key:"completed",label:"Completed",icon:"i-heroicons-check",callback:()=>{console.log("completed")}}],[{key:"uncompleted",label:"In Progress",icon:"i-heroicons-arrow-path",callback:()=>{console.log("uncompleted")}}]],b=async()=>{try{await j({page:v.value,per_page:x.value.itemsPerPage,status:h.value.value==="all"?"":h.value.value,search:k.value}).then(a=>{N.value=a.data.data.data.map(t=>({user:{id:t.id,fullname:t.fullname,email:t.email},phone:t.phone,type:t.merchants[0].type,bank:{bank:t.merchants[0].bank,bankAccount:t.merchants[0].bank_account},CV:t.merchants[0].cv_url,portfolio:JSON.parse(t.merchants[0].portfolios),certificate:JSON.parse(t.merchants[0].certificates),status:t.merchants[0].status,actions:D})),x.value={page:a.data.data.current_page,totalPage:a.data.data.last_page,totalItems:a.data.data.total,itemsPerPage:a.data.data.per_page}})}catch(a){console.error("Error fetching facilitators:",a)}finally{z.value=!1}};oe(v,b);const S=()=>{b(v.value,h.value.value,k.value)},E=q(()=>{S()},500);function q(a,t,_){let p;return function(){const f=this,m=arguments,c=function(){p=null,a.apply(f,m)};clearTimeout(p),p=setTimeout(c,t)}}const C=a=>{window.open(a,"_blank")},J=a=>{navigator.clipboard.writeText(a),P.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},K=a=>a==="verified"?"blue":a==="pending"?"orange":"gray",T=(a,t,_,p,f)=>{$.value={title:a,content:t,confirmText:_,cancelText:p,callback:f},U.value=!0},A=async(a,t)=>{await w(a,t).then(()=>{U.value=!1,P.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"User status updated successfully!"}),b()}).catch(_=>{console.error("Error updating user status:",_),P.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Error updating user status!"})})};return le(()=>{b()}),(a,t)=>{const _=Y,p=Z,f=ee,m=te,c=ie,H=ce,M=re,O=ue,Q=pe,R=de,G=ne,W=me;return n(),s("div",null,[o(G,{name:"admin"},{default:l(()=>[i("div",fe,[o(f,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:l(()=>[i("h6",{class:"font-semibold"},d(Ae)),i("div",ge,[o(_,{options:[{label:"All",value:"all",color:"gray"},{label:"Verified",value:"verified",color:"blue"},{label:"Pending",value:"pending",color:"orange"}],modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:S,class:"max-w-[180px]"},null,8,["modelValue"]),o(p,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),onInput:t[2]||(t[2]=e=>se(E)())},null,8,["modelValue"])])]),_:1}),o(f,{ui:{body:{base:"flex flex-col gap-4"}}},{default:l(()=>[o(Q,{rows:N.value,loading:z.value,"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."}},{"phone-data":l(({row:e})=>[e.phone?(n(),g(c,{key:0,target:"_blank",size:"sm",color:"green",trailing:!1,onClick:r=>C(`https://wa.me/${e.phone}`)},{default:l(()=>[o(m,{name:"whatsapp",class:"text-white"}),V(" "+d(e.phone),1)]),_:2},1032,["onClick"])):(n(),s("span",he," Kosong "))]),"user-data":l(({row:e})=>[i("div",ve,[o(H,{src:e.user.photo,alt:e.user.fullname,size:"sm",variant:"rounded-full",imgClass:"object-cover"},null,8,["src","alt"]),i("div",ye,[i("span",ke,d(e.user.fullname),1),i("span",xe,d(e.user.email),1)])])]),"bank-data":l(({row:e})=>[e.bank.bank?(n(),s("div",be,[i("div",Ce,[i("span",Ve," Bank "+d(e.bank.bank),1),o(c,{size:"xs",variant:"outline",color:"blue",onClick:r=>J(e.bank.bankAccount),class:""},{default:l(()=>[o(m,{name:"copy",class:"text-xs"})]),_:2},1032,["onClick"])]),i("span",null,d(e.bank.bankAccount),1)])):(n(),s("span",Pe," Kosong "))]),"status-data":l(({row:e})=>[o(M,{size:"xs",label:e.status,color:K(e.status),variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"type-data":l(({row:e})=>[o(M,{size:"xs",label:e.type,color:e.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"CV-data":l(({row:e})=>[e.CV?(n(),g(c,{key:0,size:"sm",color:"primary",trailing:!1,onClick:r=>C(e.CV)},{default:l(()=>[o(m,{name:"file",class:"text-white"}),V(" Open CV ")]),_:2},1032,["onClick"])):(n(),s("span",Ue," No CV "))]),"portfolio-data":l(({row:e})=>[e.portfolio?(n(),s("div",{key:0,class:B(["flex gap-1 flex-col justify-center",e.portfolio.length===0?"items-start":"items-center"])},[(n(!0),s(F,null,I(e.portfolio,(r,y)=>(n(),g(c,{key:y,size:"sm",color:"primary",trailing:!1,onClick:X=>C(r)},{default:l(()=>[o(m,{name:"file",class:"text-white"}),V(" Portfolio "+d(y+1),1)]),_:2},1032,["onClick"]))),128)),e.portfolio.length===0?(n(),s("span",ze," No Portfolio ")):L("",!0)],2)):(n(),s("span",$e," No Portfolio "))]),"certificate-data":l(({row:e})=>[e.certificate?(n(),s("div",{key:0,class:B(["flex gap-1 flex-col justify-center",e.certificate.length===0?"items-start":"items-center"])},[(n(!0),s(F,null,I(e.certificate,(r,y)=>(n(),g(c,{key:y,size:"sm",color:"primary",trailing:!1,onClick:X=>C(r)},{default:l(()=>[o(m,{name:"file",class:"text-white"}),V(" Certificate "+d(y+1),1)]),_:2},1032,["onClick"]))),128)),e.certificate.length===0?(n(),s("span",Ne," No Certificate ")):L("",!0)],2)):(n(),s("span",Se," No Certificate "))]),"actions-data":l(({row:e})=>[i("div",Te,[e.status==="verified"?(n(),g(O,{key:0,text:"Deactive"},{default:l(()=>[o(c,{icon:"i-heroicons-trash",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:r=>T("Hang On","Are you sure you want to deactivate this facilitator?","Deactivate","Cancel",()=>{A(e.user.id,"inactive")})},null,8,["onClick"])]),_:2},1024)):(n(),g(O,{key:1,text:"Verify"},{default:l(()=>[o(c,{icon:"i-heroicons-check",size:"2xs",color:"emerald",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:r=>T("Verify Facilitator","Are you sure you want to verify this facilitator?","Verify","Cancel",()=>{A(e.user.id,"verified")})},null,8,["onClick"])]),_:2},1024))])]),_:1},8,["rows","loading"]),o(R,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),max:5,"page-count":x.value.itemsPerPage,total:x.value.totalPage},null,8,["modelValue","page-count","total"])]),_:1})])]),_:1}),o(W,{isOpen:U.value,data:$.value},null,8,["isOpen","data"])])}}};export{We as default};
