import{_ as se}from"./DpvUxtYC.js";import{z as ne,g as oe,G as ae,r as _,S as le,i as ie,o as i,c as d,a as t,b as o,w as z,j as u,m as h,n as x,v as f,t as j,d as m,B as G,a6 as I,F as re,x as ce,I as ue,e as de,y as me,s as xe}from"./BSKzHnPj.js";import{_ as ge}from"./dSNV757c.js";const fe=()=>{const{$axios:a}=ne();return{getMyNotifications(c){return c={page:1,per_page:10,...c},Object.keys(c).forEach(y=>{(c[y]===null||c[y]===""||c[y]===void 0)&&delete c[y]}),a.get("/my/notifications",{params:c})},markAsRead(c){return a.patch(`/my/notifications/${c}/mark-as-read`)},markAllAsRead(){return a.patch("/my/notifications/mark-all-as-read")},deleteNotification(c){return a.delete(`/my/notifications/${c}`)}}},ye={class:"absolute px-4 sm:px-24 top-6 w-full z-50"},pe={class:"bg-white rounded-full shadow min-w-full"},be={class:"flex justify-between h-16 px-8 sm:px-8"},he={class:"flex gap-4 items-center"},ve={class:"flex-shrink-0 flex items-center align-middle"},ke=t("span",{class:"text-primary ml-2"},"gointerling",-1),we=t("span",{class:"text-gray-900"}," Facilitators List ",-1),_e={class:"md:hidden flex items-center gap-3"},Ce={class:"hidden md:flex sm:items-center sm:space-x-8 justify-between"},$e={key:0,class:"flex items-center gap-2"},Ne={key:1,class:"flex items-center gap-2"},Se={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-accent rounded-full"},Me={class:"mx-2 capitalize"},ze={key:0,class:"md:hidden bg-white rounded-lg mt-2 z-50 shadow-md"},je={class:"px-2 pt-2 pb-3 space-y-1 rounded-none"},qe={key:0,class:"flex flex-col space-y-2"},Ae={key:1,class:"flex flex-col space-y-2"},Fe={class:"flex justify-between px-4 items-center border-b border-gray-200"},Be=t("span",{class:"uppercase text-primary font-semibold"},"Notifications",-1),Oe=["onClick"],Re={class:"flex flex-col items-start"},De={class:"text-left"},Ue={class:"text-xs text-gray-400 mt-1"},Ve={key:0,class:"flex justify-center items-center h-12"},He=t("span",{class:"text-gray-400"},"No notifications",-1),Le=[He],Ie={__name:"Navbar",props:{user:{type:Object,default:null}},emits:["update"],setup(a,{emit:c}){const{getMyNotifications:y,markAsRead:W,markAllAsRead:J}=fe(),K=oe(),C=ae(),$=_([]),q=le(()=>$.value.filter(r=>!r.is_read)),p=_(!1),g=_(!1),N=_(!1),S=_(!1),Q=c,l=r=>{C.push(r),console.log("path",r)},A=()=>{g.value=!g.value,N.value=!1,p.value=!1},X=()=>{p.value=!p.value,g.value=!1},Y=()=>{N.value=!N.value,p.value=!1,g.value=!1},F=()=>{const r=ue("token");r.value=null,p.value=!1,Q("logout"),K.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Successfully signed out!"}),C.currentRoute.value.name!=="index"&&C.push({name:"auth-login"})},Z=async()=>{try{await J(),O()}catch(r){console.log("error",r)}},ee=(r,e)=>{W(r),C.push(e)},B=()=>{S.value=window.innerWidth<900},O=async()=>{try{const r=await y({page:1,limit:5});$.value=r.data.data.notifications}catch(r){console.log("error",r)}},te=r=>{const e=new Date(r),v=new Date-e,M=Math.floor(v/1e3),b=Math.floor(M/60),k=Math.floor(b/60),w=Math.floor(k/24);return w>0?`${w}d ago`:k>0?`${k}h ago`:b>0?`${b}m ago`:`${M}s ago`};return ie(()=>{B(),window.addEventListener("resize",B),O()}),(r,e)=>{var w,R,D,U,V,H,L,T,E,P;const n=se,v=de,M=me,b=ge,k=xe;return i(),d("div",ye,[t("nav",pe,[t("div",be,[t("div",he,[o(v,{to:{name:"index"},class:"flex-shrink-0 flex items-center align-middle"},{default:z(()=>[t("div",ve,[o(n,{name:"logo",class:"text-primary text-3xl"}),ke])]),_:1}),u(S)?x("",!0):(i(),h(v,{key:0,to:{name:"facilitators"},class:"inline-flex items-center px-1 font-semibold border-primary text-gray-900 focus:outline-none focus:border-blue-900 transition duration-150 ease-in-out"},{default:z(()=>[we]),_:1}))]),t("div",_e,[t("button",{onClick:e[0]||(e[0]=s=>l({name:"admin-dashboard",query:{as:"admin"}}))},[((w=a.user)==null?void 0:w.is_admin)===1?(i(),h(n,{key:0,name:"admin",class:"text-2xl",filled:""})):x("",!0)]),t("button",{onClick:e[1]||(e[1]=s=>l({name:"packages"}))},[o(n,{name:"badge",class:"text-2xl",filled:""})]),t("button",{onClick:e[2]||(e[2]=s=>l({name:"my-client-orders",query:{section:"order-history"}}))},[o(n,{name:"order",class:"text-2xl",filled:""})]),t("button",{onClick:A,class:f(u(g)?"bg-primary text-white p-2 rounded-full":"p-2")},[o(n,{name:"notification",class:f(["text-xl",u(g)?"text-white":"text-primary"])},null,8,["class"])],2),t("button",{onClick:Y,class:"text-gray-900 focus:outline-none"},[o(n,{name:"menu",class:"text-lg text-primary"})])]),t("div",Ce,[a.user?(i(),d("div",Ne,[t("button",{class:"p-2 rounded-full",onClick:e[5]||(e[5]=s=>l({name:"admin-dashboard",query:{as:"admin"}}))},[a.user.is_admin===1?(i(),h(n,{key:0,name:"admin",class:"text-2xl",filled:""})):x("",!0)]),t("button",{class:"p-2 rounded-full",onClick:e[6]||(e[6]=s=>l({name:"packages"}))},[o(n,{name:"badge",class:"text-2xl",filled:""})]),t("button",{class:"p-2 rounded-full",onClick:e[7]||(e[7]=s=>l({name:"my-client-orders",query:{section:"order-history"}}))},[o(n,{name:"order",class:"text-2xl",filled:""})]),t("button",{onClick:A,class:f(u(g)?"bg-primary text-white p-2 rounded-full relative":"p-2 relative")},[o(n,{name:"notification",class:f(["text-2xl",u(g)?"text-white":"text-primary"])},null,8,["class"]),u(q).length>0?(i(),d("span",Se,j(u(q).length),1)):x("",!0)],2),t("button",{onClick:X,class:"flex items-center text-sm font-medium text-gray-900 rounded-full focus:outline-none focus:shadow-outline"},[o(M,{alt:(R=a.user)==null?void 0:R.fullname,src:(D=a.user)==null?void 0:D.photo,size:"sm",imgClass:"object-cover"},null,8,["alt","src"]),t("span",Me,j((U=a.user)==null?void 0:U.fullname),1),o(n,{name:"chevron-simple-down",class:"mx-4",filled:""})])])):(i(),d("div",$e,[t("button",{class:"px-4 py-2 text-sm font-medium text-white bg-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[3]||(e[3]=s=>l({name:"auth-login",query:{as:"user"}}))}," Sign in as User "),t("button",{class:"px-4 py-2 text-sm font-medium text-accent border border-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[4]||(e[4]=s=>l({name:"auth-login",query:{as:"facilitator"}}))}," Sign in as Facilitator ")]))])])]),u(N)?(i(),d("div",ze,[t("div",je,[a.user?(i(),d("div",Ae,[o(v,{to:{name:"facilitators"},class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:z(()=>[o(n,{name:"user-group",class:"text-2xl"}),m(" Facilitators List ")]),_:1}),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[10]||(e[10]=s=>l({name:"profile"}))},[o(n,{name:"user-circle",class:"text-2xl"}),m(" Profile ")]),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[11]||(e[11]=s=>l({name:"index"}))},[o(n,{name:"home",class:"text-2xl"}),m(" Home ")]),t("button",{onClick:e[12]||(e[12]=s=>l({name:"my-client-orders",query:{section:"order-history"}})),class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[o(n,{name:"history",class:"text-2xl"}),m(" Order History ")]),(V=a.user)!=null&&V.is_facilitator?(i(),d("button",{key:0,class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[13]||(e[13]=s=>l({name:"my-merchant-dashboard"}))},[o(n,{name:"merchant",class:"text-2xl"}),m(" Facilitator "),((H=a.user)==null?void 0:H.merchant_status)==="pending"?(i(),h(b,{key:0,color:"orange",label:(L=a.user)==null?void 0:L.merchant_status,variant:"soft",class:"uppercase"},null,8,["label"])):x("",!0)])):x("",!0),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",href:"#",onClick:F},[o(n,{name:"logout",class:"text-2xl"}),m(" Sign out ")])])):(i(),d("div",qe,[t("button",{class:"px-4 py-2 text-sm font-medium text-white bg-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[8]||(e[8]=s=>l({name:"auth-login",query:{as:"user"}}))}," Sign in as User "),t("button",{class:"px-4 py-2 text-sm font-medium text-accent border border-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[9]||(e[9]=s=>l({name:"auth-login",query:{as:"facilitator"}}))}," Sign in as Facilitator ")]))])])):x("",!0),G(t("div",{class:f(u(S)?"mt-2 bg-white rounded-lg shadow-lg z-10":"absolute right-24 z-10 mt-2 w-96 py-1 bg-white rounded-lg shadow-lg")},[t("div",Fe,[Be,o(k,{variant:"link",color:"red",onClick:e[14]||(e[14]=s=>Z())},{default:z(()=>[m(" Mark all as read ")]),_:1})]),(i(!0),d(re,null,ce(u($),s=>(i(),d("button",{class:f(["w-full flex justify-start gap-2 align-middle items-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",s.is_read?"bg-white":"bg-gray-100"]),key:s.id,onClick:Te=>ee(s.id,s.notification_link)},[s.is_read?x("",!0):(i(),h(n,{key:0,name:"circle-badge",class:"text-accent text-xs mt-1"})),t("div",Re,[t("span",De,j(s.notification),1),t("span",Ue,j(te(s.created_at)),1)])],10,Oe))),128)),u($).length===0?(i(),d("div",Ve,Le)):x("",!0)],2),[[I,u(g)]]),G(t("div",{class:f(u(S)?"z-10 mt-2 w-58 py-1 bg-white rounded-lg shadow-lg":" absolute right-24 z-12  w-58 py-1 bg-white rounded-lg shadow-lg")},[t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[15]||(e[15]=s=>l({name:"profile"}))},[o(n,{name:"user-circle",class:"text-2xl"}),m(" Profile ")]),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[16]||(e[16]=s=>l({name:"index"}))},[o(n,{name:"home",class:"text-2xl"}),m(" Home ")]),t("button",{onClick:e[17]||(e[17]=s=>l({name:"my-client-orders",query:{section:"order-history"}})),class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[o(n,{name:"history",class:"text-2xl"}),m(" Order History ")]),(T=a.user)!=null&&T.is_facilitator?(i(),d("button",{key:0,class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[18]||(e[18]=s=>l({name:"my-merchant-dashboard"}))},[o(n,{name:"merchant",class:"text-2xl"}),m(" Facilitator "),((E=a.user)==null?void 0:E.merchant_status)==="pending"?(i(),h(b,{key:0,color:"orange",label:(P=a.user)==null?void 0:P.merchant_status,variant:"soft",class:"uppercase"},null,8,["label"])):x("",!0)])):x("",!0),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",href:"#",onClick:F},[o(n,{name:"logout",class:"text-2xl"}),m(" Sign out ")])],2),[[I,u(p)]])])}}};export{Ie as _};
