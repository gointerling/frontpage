import{_ as Z}from"./jmmVqBy-.js";import{_ as ee}from"./Bnl8-puv.js";import{g as te,V as ae,r as m,h as oe,i as ne,c as s,b as o,w as n,j as le,o as l,a as c,t as u,k as se,d as y,l as f,n as O,F as B,m as F,q as I,s as ie,v as ce}from"./B9UU7KBM.js";import{_ as re}from"./C5WGpzWO.js";import{_ as ue}from"./C-oPIdWO.js";import{_ as de}from"./DqVeMcpR.js";import{_ as pe,a as me}from"./DHHxO2wE.js";import{_ as _e}from"./BFzu51JR.js";import{_ as fe}from"./9a8OS7JN.js";import{u as ge}from"./CdZsmInH.js";import"./CTOlKjWk.js";import"./BYUOyCDf.js";import"./Dw8MMIZd.js";import"./DxfvfEJu.js";const he={class:"w-full pt-0 p-6 flex flex-col gap-2"},ve={class:"flex gap-2"},ye={key:1,class:"text-gray-300"},ke={class:"flex gap-3 items-center"},xe={class:"flex flex-col"},be={class:"font-semibold text-primary"},Ce={class:"text-sm text-gray-600"},Ve={key:0,class:"flex gap-1 flex-col"},Pe={class:"flex gap-1 items-center"},ze={class:"font-semibold text-primary"},Ue={key:1,class:"text-gray-300"},$e={key:1,class:"text-gray-300"},Se={key:0,class:"text-gray-300"},Ne={key:1,class:"text-gray-300"},Te={key:0,class:"text-gray-300"},Ae={key:1,class:"text-gray-300"},Me={class:"flex gap-1"},Oe="Service List",We={__name:"index",setup(Be){const{getMerchants:j,updateMerchantStatus:D}=ge(),P=te(),w=ae(),z=m(!1),U=m({title:"",message:"",callback:null}),$=m([]),g=m({label:"All",value:"all"}),k=m(""),h=m(1),x=m({page:1,totalPage:1,totalItems:0,itemsPerPage:10}),E=[[{key:"completed",label:"Completed",icon:"i-heroicons-check",callback:()=>{console.log("completed")}}],[{key:"uncompleted",label:"In Progress",icon:"i-heroicons-arrow-path",callback:()=>{console.log("uncompleted")}}]],b=async()=>{try{await j({page:h.value,per_page:x.value.itemsPerPage,status:g.value.value==="all"?"":g.value.value,search:k.value}).then(a=>{$.value=a.data.data.data.map(t=>({user:{id:t.id,fullname:t.fullname,email:t.email},phone:t.phone,type:t.merchants[0].type,bank:{bank:t.merchants[0].bank,bankAccount:t.merchants[0].bank_account},CV:t.merchants[0].cv_url,portfolio:JSON.parse(t.merchants[0].portfolios),certificate:JSON.parse(t.merchants[0].certificates),status:t.merchants[0].status,actions:E})),x.value={page:a.data.data.current_page,totalPage:a.data.data.last_page,totalItems:a.data.data.total,itemsPerPage:a.data.data.per_page}})}catch(a){console.error("Error fetching facilitators:",a)}};oe(h,b);const S=()=>{b(h.value,g.value.value,k.value)},L=q(()=>{S()},500);function q(a,t,_){let d;return function(){const i=this,V=arguments,p=function(){d=null,a.apply(i,V)};clearTimeout(d),d=setTimeout(p,t)}}const J=a=>{w.push(a)},C=a=>{window.open(a,"_blank")},K=a=>{navigator.clipboard.writeText(a),P.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},R=a=>a==="verified"?"blue":a==="pending"?"orange":"gray",N=(a,t,_,d,i)=>{U.value={title:a,content:t,confirmText:_,cancelText:d,callback:i},z.value=!0},T=async(a,t)=>{await D(a,t).then(()=>{z.value=!1,P.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"User status updated successfully!"}),b()}).catch(_=>{console.error("Error updating user status:",_),P.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Error updating user status!"})})};return ne(()=>{b()}),(a,t)=>{const _=Z,d=ee,i=ie,V=re,p=ue,H=ce,A=de,M=pe,Q=_e,G=me,W=le,X=fe;return l(),s("div",null,[o(W,{name:"merchant"},{default:n(()=>[c("div",he,[o(V,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:n(()=>[c("h6",{class:"font-semibold"},u(Oe)),c("div",ve,[o(_,{options:[{label:"All",value:"all",color:"gray"},{label:"Verified",value:"verified",color:"blue"},{label:"Pending",value:"pending",color:"orange"}],modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:S,class:"max-w-[180px]"},null,8,["modelValue"]),o(d,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),onInput:t[2]||(t[2]=e=>se(L)())},null,8,["modelValue"]),o(i,{size:"sm",color:"primary",onClick:t[3]||(t[3]=e=>J({name:"my-merchant-services-add"}))},{default:n(()=>[y(" Add Service ")]),_:1})])]),_:1}),o(V,{ui:{body:{base:"flex flex-col gap-4"}}},{default:n(()=>[o(Q,{rows:$.value},{"phone-data":n(({row:e})=>[e.phone?(l(),f(i,{key:0,target:"_blank",size:"sm",color:"green",trailing:!1,onClick:r=>C(`https://wa.me/${e.phone}`)},{default:n(()=>[o(p,{name:"whatsapp",class:"text-white"}),y(" "+u(e.phone),1)]),_:2},1032,["onClick"])):(l(),s("span",ye," Kosong "))]),"user-data":n(({row:e})=>[c("div",ke,[o(H,{src:e.user.photo,alt:e.user.fullname,size:"sm",variant:"rounded-full",imgClass:"object-cover"},null,8,["src","alt"]),c("div",xe,[c("span",be,u(e.user.fullname),1),c("span",Ce,u(e.user.email),1)])])]),"bank-data":n(({row:e})=>[e.bank.bank?(l(),s("div",Ve,[c("div",Pe,[c("span",ze," Bank "+u(e.bank.bank),1),o(i,{size:"xs",variant:"outline",color:"blue",onClick:r=>K(e.bank.bankAccount),class:""},{default:n(()=>[o(p,{name:"copy",class:"text-xs"})]),_:2},1032,["onClick"])]),c("span",null,u(e.bank.bankAccount),1)])):(l(),s("span",Ue," Kosong "))]),"status-data":n(({row:e})=>[o(A,{size:"xs",label:e.status,color:R(e.status),variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"type-data":n(({row:e})=>[o(A,{size:"xs",label:e.type,color:e.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"CV-data":n(({row:e})=>[e.CV?(l(),f(i,{key:0,size:"sm",color:"primary",trailing:!1,onClick:r=>C(e.CV)},{default:n(()=>[o(p,{name:"file",class:"text-white"}),y(" Open CV ")]),_:2},1032,["onClick"])):(l(),s("span",$e," No CV "))]),"portfolio-data":n(({row:e})=>[e.portfolio?(l(),s("div",{key:0,class:O(["flex gap-1 flex-col justify-center",e.portfolio.length===0?"items-start":"items-center"])},[(l(!0),s(B,null,F(e.portfolio,(r,v)=>(l(),f(i,{key:v,size:"sm",color:"primary",trailing:!1,onClick:Y=>C(r)},{default:n(()=>[o(p,{name:"file",class:"text-white"}),y(" Portfolio "+u(v+1),1)]),_:2},1032,["onClick"]))),128)),e.portfolio.length===0?(l(),s("span",Se," No Portfolio ")):I("",!0)],2)):(l(),s("span",Ne," No Portfolio "))]),"certificate-data":n(({row:e})=>[e.certificate?(l(),s("div",{key:0,class:O(["flex gap-1 flex-col justify-center",e.certificate.length===0?"items-start":"items-center"])},[(l(!0),s(B,null,F(e.certificate,(r,v)=>(l(),f(i,{key:v,size:"sm",color:"primary",trailing:!1,onClick:Y=>C(r)},{default:n(()=>[o(p,{name:"file",class:"text-white"}),y(" Certificate "+u(v+1),1)]),_:2},1032,["onClick"]))),128)),e.certificate.length===0?(l(),s("span",Te," No Certificate ")):I("",!0)],2)):(l(),s("span",Ae," No Certificate "))]),"actions-data":n(({row:e})=>[c("div",Me,[e.status==="verified"?(l(),f(M,{key:0,text:"Deactive"},{default:n(()=>[o(i,{icon:"i-heroicons-trash",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:r=>N("Hang On","Are you sure you want to deactivate this facilitator?","Deactivate","Cancel",()=>{T(e.user.id,"inactive")})},null,8,["onClick"])]),_:2},1024)):(l(),f(M,{key:1,text:"Verify"},{default:n(()=>[o(i,{icon:"i-heroicons-check",size:"2xs",color:"emerald",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:r=>N("Verify Facilitator","Are you sure you want to verify this facilitator?","Verify","Cancel",()=>{T(e.user.id,"verified")})},null,8,["onClick"])]),_:2},1024))])]),_:1},8,["rows"]),o(G,{modelValue:h.value,"onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),max:5,"page-count":x.value.itemsPerPage,total:x.value.totalPage},null,8,["modelValue","page-count","total"])]),_:1})])]),_:1}),o(X,{isOpen:z.value,data:U.value},null,8,["isOpen","data"])])}}};export{We as default};
