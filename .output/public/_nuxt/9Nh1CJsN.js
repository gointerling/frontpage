import{_ as ce}from"./CHXpCIaM.js";import{_ as de}from"./CcCHlZCc.js";import{_ as ue}from"./B0Dl69lt.js";import{g as Q,r as m,o as c,c as d,a as e,b as r,t as n,n as y,v as Y,G as me,H as pe,h as M,i as fe,I as N,j as o,m as q,w as v,d as A,J as _e,s as xe,K as he,E as ge}from"./CKdM4cz9.js";import{_ as X}from"./DuwjcmjQ.js";import{_ as ve}from"./BXdaVrPh.js";import{_ as ye}from"./D6qzywPR.js";import{_ as we}from"./DldPo-K8.js";import{u as ke}from"./BgplXEVp.js";import{u as be}from"./slWFKyo_.js";import{u as Ue}from"./BGfGQ7d3.js";import{P as Fe}from"./BWF9xweS.js";import{_ as Se}from"./wjg5I4wM.js";import{_ as $e}from"./BcpRqi9a.js";import"./BjIUpXXY.js";import"./D5eILr3y.js";import"./CBkpnuFb.js";import"./7MNWUB0x.js";const Pe=["accept"],je={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},Ae=e("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),Ce=[Ae],Ve={key:1},Be={class:"text-primary group-hover:text-white transition duration-200"},De=e("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),ze={key:2,class:"mt-2 text-gray-700 text-xs"},Ie={key:3,class:"mt-2 text-red-500 text-xs"},Te={__name:"FileUploadInline",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0},center:{type:Boolean,default:!1}},emits:["fileUploaded"],setup(b,{emit:D}){const{uploadFile:z,deleteFile:I}=ke(),U=b,F=Q(),T=D,p=m(null),u=m(""),f=m(""),h=m(null),S=m(!1),j=()=>{p.value.click()},g=()=>{const l=p.value.files[0];l&&(u.value=l.name,U.maxSize&&l.size>U.maxSize?(f.value=`File size exceeds the limit of ${w(U.maxSize/1024/1024,2)} MB.`,u.value=""):(f.value="",s(l,`${U.title}_${l.name}`)))},$=()=>{p.value.value=null,u.value="",f.value="",O(h.value)},w=(l,x)=>+(Math.round(l+"e"+x)+"e-"+x),s=(l,x)=>{S.value=!0,z(l,x).then(_=>{S.value=!1,h.value=_.data.data.fileRecord,P(_.data.data.fileRecord.url),console.log("File uploaded:",_.data.data.fileRecord.url),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(_=>{console.error(_),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:C(_.response.data.error)})})},O=l=>{I(l.id).then(()=>{P(""),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(x=>{console.error(x),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:C(x.response.data.error)})})},P=l=>{T("fileUploaded",l)},C=l=>l.errors?l.errors[Object.keys(l.errors)[0]][0]:l.message;return(l,x)=>{const _=X;return c(),d("div",{class:Y(["file-upload inline-block",b.center?"flex flex-col items-center":""])},[e("input",{ref_key:"fileInput",ref:p,type:"file",accept:b.accept,class:"hidden",onChange:g},null,40,Pe),S.value?(c(),d("button",je,Ce)):(c(),d("div",Ve,[u.value?y("",!0):(c(),d("button",{key:0,onClick:j,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),e("span",Be," Upload "+n(b.title),1)])),u.value?(c(),d("button",{key:1,onClick:$,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),De])):y("",!0)])),u.value&&b.isDisplayFile?(c(),d("p",ze," Selected file: "+n(u.value),1)):y("",!0),f.value?(c(),d("p",Ie,n(f.value),1)):y("",!0)],2)}}},Oe=""+new URL("back-ads.DbAjkD-H.svg",import.meta.url).href,Re={class:"min-h-screen flex flex-col"},Me={key:1,class:"flex flex-col h-screen"},Ne={key:0,class:"flex flex-col px-8 sm:px-40"},qe={class:"flex flex-col gap-4 p-8 sm:px-32 rounded-md"},Ee={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Le=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Name",-1),He={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ge=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Tagline",-1),We={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Je=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Description",-1),Ke={class:"w-full sm:w-10/12"},Qe=e("label",{class:"text-xs text-gray-500"},"Maks. 50 Words",-1),Ye={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Xe=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Package",-1),Ze={class:"flex gap-1 items-center"},et=e("span",{class:"inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":"true"},null,-1),tt={class:"truncate"},st={class:"flex justify-start gap-2 py-2 px-2"},ot={class:""},at={class:"flex flex-col"},nt={class:"truncate"},lt={class:"truncate"},it={class:"truncate"},rt={class:"truncate"},ct={class:"truncate"},dt={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},ut=e("span",{class:"flex-grow font-medium text-left sm:text-right"}," Upload Image ",-1),mt={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-end"},pt={key:1},ft={class:"flex flex-col md:flex-row gap-8 p-8 sm:px-24 rounded-md w-full justify-center"},_t={class:"flex gap-4 flex-col"},xt=e("span",{class:"flex-grow font-medium"},"Preview",-1),ht=["src"],gt={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-between p-6 transition-opacity duration-300 ease-in-out opacity-0 hover:opacity-100 bg-gradient-to-r from-transparent via-transparent via-10% to-primary rounded-lg z-10"},vt={class:"w-full h-full"},yt={class:"flex justify-end"},wt={class:"flex flex-col justify-center items-end h-full"},kt={class:"h-full flex flex-col items-end justify-center pb-6"},bt={class:"text-white text-xl font-bold text-right pb-4"},Ut={class:"text-white text-sm max-w-sm text-right"},Ft={key:0,class:"w-full flex items-start justify-start flex-col gap-1"},St=e("span",{class:"flex-grow font-medium"},"Advertisement Detail",-1),$t={class:"h-full flex items-start justify-start flex-col gap-1 mt-2"},Pt=e("span",{class:"font-thin text-primary text-sm"}," Title ",-1),jt={class:"font-semibold text-primary text-lg"},At=e("span",{class:"font-thin text-primary text-sm"}," Tagline ",-1),Ct={class:"font-semibold text-primary text-lg"},Vt=e("span",{class:"font-thin text-primary text-sm"}," Package ",-1),Bt={class:"font-semibold text-primary text-lg"},Dt={class:"text-primary text-sm"},zt=e("span",{class:"font-thin text-primary text-sm"}," Status ",-1),It=e("span",{class:"font-thin text-primary text-sm"}," Valid Until ",-1),Tt={class:"font-semibold text-primary text-lg"},Ot={key:1,class:"w-full flex items-start justify-start flex-col gap-1"},Rt=e("span",{class:"flex-grow font-medium"},"Payment Detail",-1),Mt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2 flex-grow"},Nt=e("span",{class:"font-thin text-primary text-sm"}," Amount to be transfer : ",-1),qt={class:"font-semibold text-primary text-lg"},Et={class:"font-thin text-primary text-sm"},Lt={class:"font-bold text-primary text-md text-xl flex gap-2 items-center py-2 capitalize"},Ht={class:"uppercase"},Gt={class:"font-thin text-primary text-sm"},Wt={key:0,class:"flex gap-2"},Jt={key:2,class:"text-xs text-gray-500 max-w-xs"},ps={__name:"setup",setup(b){const{getAdsPackages:D,setMyAds:z,getAdsDetail:I,updateMyAdsProofOfPayment:U}=be(),{getSettingBank:F}=Ue(),T=me(),p=pe(),u=Q();m(p.params.id);const f=m(!0),h=m(!1),S=m(!0),j=m(null),g=m("fill-data"),$=m([]),w=m(null),s=m({name:null,tagline:null,description:null,package:{},image_url:null,status:"pending"});M(()=>s.value.description,t=>{s.value.description=O(t,50)}),M(()=>g.value,t=>{T.push({query:{...p.query,section:t}})}),M(()=>s.value,()=>{S.value=!(s.value.name&&s.value.tagline&&s.value.description&&s.value.package&&s.value.image_url)},{deep:!0});const O=(t,a)=>{const k=t.split(/\s+/);return k.length>a?k.slice(0,a).join(" "):t},P=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),C=t=>{navigator.clipboard.writeText(t),u.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"Bank Account copied to clipboard!"})},l=t=>{s.value.image_url=t},x=async()=>{try{j.value=N("token").value.user||null}catch(t){console.error("Fetching user failed:",t)}},_=()=>{N("token").value=null,j.value=null},Z=()=>{p.query.section?g.value=p.query.section:g.value="fill-data"},R=t=>t.errors?t.errors[Object.keys(t.errors)[0]][0]:t.message,E=t=>{switch(t){case"active":return{color:"green",text:"Active"};case"inactive":return{color:"gray",text:"Inactive"};case"pending":return{color:"orange",text:"Pending"};default:return{color:"gray",text:"Unknown"}}},ee=async()=>{try{const{data:t}=await D();$.value=t.data.packages,s.value.package=$.value[0]}catch(t){console.error(t),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(t.response.data.error)})}},te=async()=>{try{const{data:t}=await F();w.value=t.data.setting}catch(t){console.error("Error fetching merchant orders:",t)}finally{f.value=!1}},L=async t=>{f.value=!0;try{const{data:a}=await I(t);s.value={...a.data.advertisement,package:$.value.find(k=>k.id===a.data.advertisement.package_id)},a.data.advertisement.payment_file_url&&a.data.advertisement.status==="pending"&&(h.value=!0)}catch(a){console.error("Error fetching ads detail:",a)}finally{f.value=!1}},se=async()=>{await z({...s.value,package_id:s.value.package.id}).then(t=>{s.value.id=t.data.data.advertisement.id,p.query.transaction_id=t.data.data.advertisement.id,g.value="payment",u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Please continue to the payment process!"})}).catch(t=>{console.error(t),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(t.response.data.error)})})},oe=t=>{U(s.value.id,{payment_file_url:t}).then(()=>{u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Proof of payment uploaded successfully!"}),h.value=!0,L(s.value.id)}).catch(a=>{console.error(a),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(a.response.data.error)})})};return fe(async()=>{if(N("token").value&&await x(),Z(),await ee(),await te(),p.query.section==="payment"){const t=p.query.transaction_id;await L(t)}f.value=!1}),(t,a)=>{var W,J,K;const k=ce,ae=de,ne=ue,V=xe,H=X,le=ve,ie=ye,G=ge,re=we;return c(),d("div",Re,[o(f)?(c(),q(Fe,{key:0})):(c(),d("div",Me,[r(Se,{user:o(j),onLogout:_},null,8,["user"]),r($e,{"is-title-visible":!0,"banner-title":"Advertising Form on Gointerling Website",class:"min-h-[250px] pt-44 sm:pt-60"}),e("div",{class:"flex-grow p-6 lg:px-36 flex flex-col gap-6 bg-no-repeat bg-cover bg-bottom mt-8",style:_e({backgroundImage:`url(${o(Oe)})`})},[o(g)==="fill-data"?(c(),d("section",Ne,[e("div",qe,[e("div",Ee,[Le,r(k,{modelValue:o(s).name,"onUpdate:modelValue":a[0]||(a[0]=i=>o(s).name=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",He,[Ge,r(k,{modelValue:o(s).tagline,"onUpdate:modelValue":a[1]||(a[1]=i=>o(s).tagline=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",We,[Je,e("div",Ke,[r(ae,{modelValue:o(s).description,"onUpdate:modelValue":a[2]||(a[2]=i=>o(s).description=i),class:"w-full"},null,8,["modelValue"]),Qe])]),e("div",Ye,[Xe,r(ne,{modelValue:o(s).package,"onUpdate:modelValue":a[3]||(a[3]=i=>o(s).package=i),options:o($),placeholder:"Select Package",class:"w-full sm:w-10/12"},{label:v(()=>[e("div",Ze,[et,e("span",tt,n(o(s).package.name),1)])]),option:v(({option:i})=>[e("div",st,[e("div",ot,[e("span",{class:Y([i.online?"bg-green-400":"bg-accent","inline-block h-2 w-2 flex-shrink-0 rounded-full"]),"aria-hidden":"true"},null,2)]),e("div",at,[e("span",nt,n(i.name),1),e("span",lt," Paket "+n(i.duration)+" Bulan ",1),e("span",it,"Harga "+n(P(i.price)),1),e("span",rt," Ukuran "+n(i.size_x)+" x "+n(i.size_y),1),e("span",ct," Penayangan di "+n(i.route_json.map(B=>B.name).join(", ")),1)])])]),_:1},8,["modelValue","options"])]),e("div",dt,[ut,r(Te,{class:"w-full sm:w-10/12",title:"Ads Banner",accept:"images/*","max-size":"6291456",onFileUploaded:l})]),e("div",mt,[r(V,{class:"w-full sm:w-10/12 bg-accent",block:"",onClick:se,disabled:o(S)},{default:v(()=>[A(" Continue ")]),_:1},8,["disabled"])])])])):y("",!0),o(g)==="payment"?(c(),d("section",pt,[e("div",ft,[e("div",_t,[xt,r(le,{ui:{body:{padding:""}},class:"w-full sm:w-[600px] relative"},{default:v(()=>[e("img",{src:o(s).image_url,alt:"",class:"w-full h-full object-cover rounded-lg"},null,8,ht),e("div",gt,[e("div",vt,[e("div",yt,[e("button",{onClick:a[4]||(a[4]=(...i)=>t.cancel&&t.cancel(...i)),class:"text-white bg-none"},[r(H,{name:"x"})])]),e("div",wt,[e("div",kt,[e("h6",bt,n(o(s).tagline),1),e("p",Ut,n(o(s).description),1)])])])])]),_:1})]),o(s).status==="active"?(c(),d("div",Ft,[St,e("div",$t,[Pt,e("h6",jt,n(o(s).name),1),At,e("h6",Ct,n(o(s).tagline),1),Vt,e("h6",Bt,n(o(s).package.name)+" ("+n(o(s).package.duration)+" Bulan) ",1),e("span",Dt,n(P(o(s).package.price)),1),zt,r(ie,{color:E(o(s).status).color,variant:"soft"},{default:v(()=>[A(n(E(o(s).status).text),1)]),_:1},8,["color"]),It,e("h6",Tt,n(o(s).valid_until_date?new Date(o(s).valid_until_date).toLocaleDateString():"-"),1)])])):(c(),d("div",Ot,[Rt,e("div",Mt,[Nt,e("h6",qt,n(P(o(s).package.price)),1),e("span",Et,n((W=o(w))==null?void 0:W.bank_account_name)+" Account ",1),e("h6",Lt,[A(n((J=o(w))==null?void 0:J.bank_account)+" ",1),e("b",Ht,"("+n((K=o(w))==null?void 0:K.bank)+")",1),r(V,{size:"xs",variant:"outline",color:"blue",onClick:a[5]||(a[5]=i=>{var B;return C((B=o(w))==null?void 0:B.bank_account)}),class:""},{default:v(()=>[r(H,{name:"copy",class:"text-lg"})]),_:1})]),e("span",Gt,n(o(h)?"Re":"")+" Upload Proof of Payment ",1),o(h)?(c(),d("div",Wt,[r(V,{color:"primary",class:"text-white py-3 rounded-lg my-1",onClick:a[6]||(a[6]=i=>h.value=!1)},{default:v(()=>[r(G,{name:"i-heroicons-arrow-path"}),A(" Reupload ")]),_:1}),o(h)?(c(),q(V,{key:0,class:"text-white py-3 rounded-lg my-1 bg-accent hover:bg-accent-700",onClick:a[7]||(a[7]=i=>("navigateTo"in t?t.navigateTo:o(he))({name:"my-client-orders",query:{section:"ads-history"}}))},{default:v(()=>[r(G,{name:"i-heroicons-megaphone"}),A(" Other Ads History ")]),_:1})):y("",!0)])):(c(),q(re,{key:1,title:"Proof of Payment",accept:"*","max-size":"6291456",onFileUploaded:oe,class:"my-1"})),o(s).payment_file_url?(c(),d("span",Jt," *Your transaction will be processed. Please wait for the verification process. ")):y("",!0)])]))])])):y("",!0)],4)]))])}}};export{ps as default};
