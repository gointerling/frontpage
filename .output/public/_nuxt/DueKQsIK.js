import{_ as B}from"./CGyI2hQu.js";import{g as D,r as l,o as i,c as r,a as h,b as y,t as f,q as p}from"./BTSDszUJ.js";import{u as $}from"./DRO6Gor9.js";const E={class:"file-upload"},I=["accept"],M={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200"},O=h("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),V=[O],R={key:1},j={class:"text-primary group-hover:text-white transition duration-200"},q=h("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),P={key:2,class:"mt-2 text-gray-700 text-xs"},T={key:3,class:"mt-2 text-red-500 text-xs"},J={__name:"FileUpload",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0}},emits:["fileUploaded"],setup(n,{emit:_}){const{uploadFile:b,deleteFile:F}=$(),c=n,d=D(),k=_,u=l(null),a=l(""),s=l(""),g=l(null),m=l(!1),S=()=>{u.value.click()},U=()=>{const e=u.value.files[0];e&&(a.value=e.name,c.maxSize&&e.size>c.maxSize?(s.value=`File size exceeds the limit of ${C(c.maxSize/1024/1024,2)} MB.`,a.value=""):(s.value="",N(e,`${c.title}_${e.name}`)))},z=()=>{u.value.value=null,a.value="",s.value="",w(g.value)},C=(e,t)=>+(Math.round(e+"e"+t)+"e-"+t),N=(e,t)=>{m.value=!0,b(e,t).then(o=>{m.value=!1,g.value=o.data.data.fileRecord,x(o.data.data.fileRecord.url),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(o=>{console.error(o),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:v(o.response.data.error)})})},w=e=>{F(e.id).then(()=>{x(""),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(t=>{console.error(t),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:v(t.response.data.error)})})},x=e=>{k("fileUploaded",e)},v=e=>e.errors?e.errors[Object.keys(e.errors)[0]][0]:e.message;return(e,t)=>{const o=B;return i(),r("div",E,[h("input",{ref_key:"fileInput",ref:u,type:"file",accept:n.accept,class:"hidden",onChange:U},null,40,I),m.value?(i(),r("button",M,V)):(i(),r("div",R,[a.value?p("",!0):(i(),r("button",{key:0,onClick:S,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200"},[y(o,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),h("span",j," Upload "+f(n.title),1)])),a.value?(i(),r("button",{key:1,onClick:z,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200"},[y(o,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),q])):p("",!0)])),a.value&&n.isDisplayFile?(i(),r("p",P," Selected file: "+f(a.value),1)):p("",!0),s.value?(i(),r("p",T,f(s.value),1)):p("",!0)])}}};export{J as _};
