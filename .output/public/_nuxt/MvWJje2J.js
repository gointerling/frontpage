import{P as J}from"./lvvU_4fQ.js";import{_ as K}from"./QnuOKU9Z.js";import{_ as Q}from"./DKeXide2.js";import{_ as W}from"./BbsY0FNM.js";import{z as X,g as Z,L as ee,M as E,r as d,I as F,h as te,i as se,c as i,m as le,a as s,b as t,d as m,j as p,w as o,T as ae,o as n,t as T,A as N,s as oe}from"./C1jR0ddT.js";import{_ as ne}from"./C23D_ozY.js";import{_ as ie}from"./DRzSt5f8.js";import{w as re,l as O}from"./BBPPacMb.js";import{c as A,a as v,b as ue}from"./M1_3KTZr.js";import"./Y9ddtWO7.js";import"./DNrSaIVj.js";const de=()=>{const{$axios:f}=X();return{login(w){return f.post("/auth/login",w)},register(w){return f.post("/auth/register",w)},logout(){return f.post("/auth/logout")},getUser(){return f.get("/auth/user")},getTestData(){return f.get("/test")}}},ce={key:1,class:"flex justify-center items-center min-h-screen background p-4 md:p-0"},me={class:"bg-white rounded-lg shadow-md w-full md:w-auto grid grid-cols-1 md:grid-cols-2 gap-2"},pe={class:"flex flex-col justify-between bg-accent rounded-t-lg md:rounded-l-lg md:rounded-tr-none"},fe={class:"grow w-full flex flex-col items-center justify-center p-4"},ge=["src"],_e={class:"relative w-full px-3"},xe={key:"login",class:"px-4 md:px-10 py-8"},he=["src"],ve={class:"text-2xl font-bold my-6 text-primary text-center md:text-left"},we={class:"relative"},ye={key:0,class:"flex items-center gap-1"},be={key:1,class:"flex items-center gap-1"},ke={class:"w-full bg-white py-2 rounded-md flex gap-2 justify-center items-center border-2 border-gray-100"},Ve={class:"mt-4 flex justify-between text-sm text-gray-600"},qe={key:"register",class:"px-4 md:px-10 py-8"},Pe=["src"],Ce={class:"text-2xl font-bold my-6 text-primary text-center md:text-left"},Ue={class:"relative"},Se={key:0,class:"flex items-center gap-1"},je={key:1,class:"flex items-center gap-1"},$e={class:"relative"},Le={key:0,class:"flex items-center gap-1"},Re={key:1,class:"flex items-center gap-1"},Be={class:"w-full bg-white py-2 rounded-md flex gap-2 justify-center items-center border-2 border-gray-100"},Ee={class:"mt-4 flex justify-between text-sm text-gray-600"},He={__name:"login",setup(f){const{login:w,register:D}=de(),y=Z(),V=ee();E();const{as:b,type:I}=E().query,g=d(""),_=d(""),q=d(""),P=d("");F("token");const k=d("login"),S=d(!0),c=d(!1),u=d(!1),M=A().shape({email:v().email("Invalid email").required("Email is required"),password:v().required("Password is required")}),G=A().shape({fullname:v().required("Full name is required"),email:v().email("Invalid email").required("Email is required"),password:v().required("Password is required"),confirmPassword:v().oneOf([ue("password"),null],"Passwords must match").required("Confirm password is required")}),j=l=>{k.value=l,V.push({query:{as:b,type:l}})},$=async()=>{c.value=!0;const l={email:g.value,password:_.value};await w(l).then(e=>{const U=F("token");U.value=e.data.data,c.value=!1,y.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"You have successfully logged in!"}),V.push("/")}).catch(e=>{console.error(e),y.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:e.response.data.error}),c.value=!1})},Y=async()=>{c.value=!0;const l={fullname:P.value,email:g.value,password:_.value,password_confirmation:q.value,as:b==="facilitator"?"facilitator":"client"};await D(l).then(e=>{y.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"You have successfully registered!"}),$()}).catch(e=>{c.value=!1,console.error(e),y.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:z(e.response.data.error)})})},z=l=>{for(const e in l)if(l[e].length>0)return l[e][0];return null},H=l=>{V.push(l)},C=()=>{u.value=!u.value};return te(()=>I,l=>{l==="register"?k.value="register":k.value="login"},{immediate:!0}),se(()=>{S.value=!1}),(l,e)=>{const U=J,r=K,x=Q,h=W,L=oe,R=ne,B=ie;return n(),i("div",null,[S.value?(n(),le(U,{key:0})):(n(),i("div",ce,[s("div",me,[s("div",pe,[s("button",{class:"flex gap-2 items-center justify-start mx-8 mt-8 text-white",onClick:e[0]||(e[0]=a=>H("/"))},[t(r,{name:"back",class:"text-white"}),m(" Back ")]),s("div",fe,[s("img",{src:p(re),class:"w-full max-w-[300px] hidden md:flex"},null,8,ge)])]),s("div",_e,[t(ae,{name:"fade",mode:"out-in"},{default:o(()=>[k.value==="login"?(n(),i("div",xe,[s("img",{src:p(O),class:"my-4 w-32 mx-auto md:mx-0"},null,8,he),s("h1",ve," Login "+T(p(b)==="facilitator"?"as Facilitator":""),1),t(R,{"validation-schema":p(M),onSubmit:$},{default:o(()=>[t(h,{name:"email",label:"Email",class:"mb-2"},{default:o(()=>[t(x,{type:"email",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(h,{name:"password",label:"Password",class:"mb-2"},{default:o(()=>[s("div",we,[t(x,{type:u.value?"text":"password",modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",ye,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",be,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(L,{type:"submit",loading:c.value,block:"",class:"w-full bg-blue-500 text-white text-center py-2 rounded-md hover:bg-blue-600"},{default:o(()=>[m(" Login ")]),_:1},8,["loading"])]),_:1},8,["validation-schema"]),t(B,{label:"OR",class:"py-2 mt-4"}),s("button",ke,[t(r,{name:"google",filled:""}),m(" Continue with Google ")]),s("p",Ve,[m(" Don't have an account? "),s("a",{href:"#",onClick:e[3]||(e[3]=N(a=>j("register"),["prevent"])),class:"text-blue-500 hover:underline"}," Register ")])])):(n(),i("div",qe,[s("img",{src:p(O),class:"my-4 w-32 mx-auto md:mx-0"},null,8,Pe),s("h1",Ce," Register "+T(p(b)==="facilitator"?"as Facilitator":""),1),t(R,{"validation-schema":p(G),onSubmit:Y},{default:o(()=>[t(h,{name:"fullname",label:"Full Name",class:"mb-2"},{default:o(()=>[t(x,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=a=>P.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(h,{name:"email",label:"Email",class:"mb-2"},{default:o(()=>[t(x,{type:"email",modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(h,{name:"password",label:"Password",class:"mb-2"},{default:o(()=>[s("div",Ue,[t(x,{type:u.value?"text":"password",modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",Se,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",je,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(h,{name:"confirmPassword",label:"Confirm Password",class:"mb-2"},{default:o(()=>[s("div",$e,[t(x,{type:u.value?"text":"password",modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=a=>q.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",Le,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",Re,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(L,{type:"submit",loading:c.value,block:"",class:"w-full bg-blue-500 text-white text-center py-2 rounded-md hover:bg-blue-600"},{default:o(()=>[m(" Sign Up ")]),_:1},8,["loading"])]),_:1},8,["validation-schema"]),t(B,{label:"OR",class:"py-2 mt-4"}),s("button",Be,[t(r,{name:"google",filled:""}),m(" Continue with Google ")]),s("p",Ee,[m(" Already have an account? "),s("a",{href:"#",onClick:e[8]||(e[8]=N(a=>j("login"),["prevent"])),class:"text-blue-500 hover:underline"}," Login ")])]))]),_:1})])])]))])}}};export{He as default};
