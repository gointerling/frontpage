import{_ as ie}from"./x7ZR_v7-.js";import{_ as re}from"./C9zxKbhW.js";import{_ as ce}from"./B6xM7dr8.js";import{g as W,r as d,o as c,c as u,a as e,b as r,t as a,n as w,v as Q,G as de,H as ue,h as N,i as me,I as M,j as o,m as pe,w as v,d as A,J as fe,s as _e}from"./DMHnhahR.js";import{_ as X}from"./BxGqzEK9.js";import{_ as xe}from"./Bhi3NMVq.js";import{_ as ge}from"./DuoJ_s3g.js";import{u as he}from"./CpkR63Mp.js";import{u as ve}from"./CBFwh-Sn.js";import{u as ye}from"./Co8Vb5W8.js";import{P as we}from"./BqZ71ixK.js";import{_ as ke}from"./nuRFeGeJ.js";import{_ as be}from"./CEDCLxzt.js";import"./WJtGFIw5.js";import"./DyU4X0IT.js";import"./A9DjunIi.js";import"./BoWCG-Uk.js";const Ue=["accept"],Fe={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},Se=e("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),Ce=[Se],je={key:1},Pe={class:"text-primary group-hover:text-white transition duration-200"},Ae=e("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),$e={key:2,class:"mt-2 text-gray-700 text-xs"},Be={key:3,class:"mt-2 text-red-500 text-xs"},J={__name:"FileUploadInline",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0},center:{type:Boolean,default:!1}},emits:["fileUploaded"],setup(k,{emit:V}){const{uploadFile:z,deleteFile:I}=he(),j=k,b=W(),D=V,m=d(null),p=d(""),f=d(""),U=d(null),F=d(!1),P=()=>{m.value.click()},h=()=>{const n=m.value.files[0];n&&(p.value=n.name,j.maxSize&&n.size>j.maxSize?(f.value=`File size exceeds the limit of ${y(j.maxSize/1024/1024,2)} MB.`,p.value=""):(f.value="",s(n,`${j.title}_${n.name}`)))},S=()=>{m.value.value=null,p.value="",f.value="",R(U.value)},y=(n,x)=>+(Math.round(n+"e"+x)+"e-"+x),s=(n,x)=>{F.value=!0,z(n,x).then(_=>{F.value=!1,U.value=_.data.data.fileRecord,$(_.data.data.fileRecord.url),console.log("File uploaded:",_.data.data.fileRecord.url),b.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(_=>{console.error(_),b.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:C(_.response.data.error)})})},R=n=>{I(n.id).then(()=>{$(""),b.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(x=>{console.error(x),b.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:C(x.response.data.error)})})},$=n=>{D("fileUploaded",n)},C=n=>n.errors?n.errors[Object.keys(n.errors)[0]][0]:n.message;return(n,x)=>{const _=X;return c(),u("div",{class:Q(["file-upload inline-block",k.center?"flex flex-col items-center":""])},[e("input",{ref_key:"fileInput",ref:m,type:"file",accept:k.accept,class:"hidden",onChange:h},null,40,Ue),F.value?(c(),u("button",Fe,Ce)):(c(),u("div",je,[p.value?w("",!0):(c(),u("button",{key:0,onClick:P,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),e("span",Pe," Upload "+a(k.title),1)])),p.value?(c(),u("button",{key:1,onClick:S,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200 w-full"},[r(_,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),Ae])):w("",!0)])),p.value&&k.isDisplayFile?(c(),u("p",$e," Selected file: "+a(p.value),1)):w("",!0),f.value?(c(),u("p",Be,a(f.value),1)):w("",!0)],2)}}},Ve=""+new URL("back-ads.CbXaGjBo.svg",import.meta.url).href,ze={class:"min-h-screen flex flex-col"},Ie={key:1,class:"flex flex-col h-screen"},De={key:0,class:"flex flex-col px-8 sm:px-40"},Re={class:"flex flex-col gap-4 p-8 sm:px-32 rounded-md"},Ne={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Me=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Name",-1),Oe={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Te=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Tagline",-1),qe={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ee=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Description",-1),Le={class:"w-full sm:w-10/12"},Ge=e("label",{class:"text-xs text-gray-500"},"Maks. 50 Words",-1),He={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Je=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Package",-1),We={class:"flex gap-1 items-center"},Qe=e("span",{class:"inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":"true"},null,-1),Xe={class:"truncate"},Ke={class:"flex justify-start gap-2 py-2 px-2"},Ye={class:""},Ze={class:"flex flex-col"},et={class:"truncate"},tt={class:"truncate"},st={class:"truncate"},ot={class:"truncate"},at={class:"truncate"},lt={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},nt=e("span",{class:"flex-grow font-medium text-left sm:text-right"},"Upload Image",-1),it={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-end"},rt={key:1},ct={class:"flex flex-col md:flex-row gap-8 p-8 sm:px-24 rounded-md w-full justify-center"},dt={class:"flex gap-4 flex-col"},ut=e("span",{class:"flex-grow font-medium"},"Preview",-1),mt=["src"],pt={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-between p-6 transition-opacity duration-300 ease-in-out opacity-0 hover:opacity-100 bg-gradient-to-r from-transparent via-transparent via-10% to-primary rounded-lg z-10"},ft={class:"w-full h-full"},_t={class:"flex justify-end"},xt={class:"flex flex-col justify-center items-end h-full"},gt={class:"h-full flex flex-col items-end justify-center pb-6"},ht={class:"text-white text-xl font-bold text-right pb-4"},vt={class:"text-white text-sm max-w-sm text-right"},yt={key:0,class:"w-full flex items-start justify-start flex-col gap-1"},wt=e("span",{class:"flex-grow font-medium"},"Advertisement Detail",-1),kt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2"},bt=e("span",{class:"font-thin text-primary text-sm"}," Title ",-1),Ut={class:"font-semibold text-primary text-lg"},Ft=e("span",{class:"font-thin text-primary text-sm"}," Tagline ",-1),St={class:"font-semibold text-primary text-lg"},Ct=e("span",{class:"font-thin text-primary text-sm"}," Package ",-1),jt={class:"font-semibold text-primary text-lg"},Pt={class:"text-primary text-sm"},At=e("span",{class:"font-thin text-primary text-sm"}," Status ",-1),$t=e("span",{class:"font-thin text-primary text-sm"}," Valid Until ",-1),Bt={class:"font-semibold text-primary text-lg"},Vt={key:1,class:"w-full flex items-start justify-start flex-col gap-1"},zt=e("span",{class:"flex-grow font-medium"},"Payment Detail",-1),It={class:"h-full flex items-start justify-start flex-col gap-1 mt-2 flex-grow"},Dt=e("span",{class:"font-thin text-primary text-sm"}," Amount to be transfer : ",-1),Rt={class:"font-semibold text-primary text-lg"},Nt={class:"font-thin text-primary text-sm"},Mt={class:"font-bold text-primary text-md text-xl flex gap-2 items-center py-2 capitalize"},Ot={class:"uppercase"},Tt={class:"font-thin text-primary text-sm"},qt={key:0,class:"flex gap-2"},ns={__name:"setup",setup(k){const{getAdsPackages:V,setMyAds:z,getAdsDetail:I,updateMyAdsProofOfPayment:j}=ve(),{getSettingBank:b}=ye(),D=de(),m=ue(),p=W();d(m.params.id);const f=d(!0),U=d(!1),F=d(!0),P=d(null),h=d("fill-data"),S=d([]),y=d(null),s=d({name:null,tagline:null,description:null,package:{},image_url:null,status:"pending"});N(()=>s.value.description,t=>{s.value.description=R(t,50)}),N(()=>h.value,t=>{D.push({query:{...m.query,section:t}})}),N(()=>s.value,()=>{F.value=!(s.value.name&&s.value.tagline&&s.value.description&&s.value.package&&s.value.image_url)},{deep:!0});const R=(t,l)=>{const g=t.split(/\s+/);return g.length>l?g.slice(0,l).join(" "):t},$=t=>JSON.parse(t).map(g=>g.name).join(", "),C=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),n=t=>{navigator.clipboard.writeText(t),p.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"Bank Account copied to clipboard!"})},x=t=>{s.value.image_url=t},_=async()=>{try{P.value=M("token").value.user||null}catch(t){console.error("Fetching user failed:",t)}},K=()=>{M("token").value=null,P.value=null},Y=()=>{m.query.section?h.value=m.query.section:h.value="fill-data"},O=t=>t.errors?t.errors[Object.keys(t.errors)[0]][0]:t.message,T=t=>{switch(t){case"active":return{color:"green",text:"Active"};case"inactive":return{color:"gray",text:"Inactive"};case"pending":return{color:"orange",text:"Pending"};default:return{color:"gray",text:"Unknown"}}},Z=async()=>{try{const{data:t}=await V();S.value=t.data.packages,s.value.package=S.value[0]}catch(t){console.error(t),p.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:O(t.response.data.error)})}},ee=async()=>{try{const{data:t}=await b();y.value=t.data.setting}catch(t){console.error("Error fetching merchant orders:",t)}finally{f.value=!1}},te=async t=>{f.value=!0;try{const{data:l}=await I(t);s.value={...l.data.advertisement,package:S.value.find(g=>g.id===l.data.advertisement.package_id)},l.data.advertisement.payment_file_url&&l.data.advertisement.status==="pending"&&(U.value=!0)}catch(l){console.error("Error fetching ads detail:",l)}finally{f.value=!1}},se=async()=>{await z({...s.value,package_id:s.value.package.id}).then(t=>{s.value.id=t.data.data.advertisement.id,m.query.transaction_id=t.data.data.advertisement.id,h.value="payment",p.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Please continue to the payment process!"})}).catch(t=>{console.error(t),p.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:O(t.response.data.error)})})};return me(async()=>{if(M("token").value&&await _(),Y(),await Z(),await ee(),m.query.section==="payment"){const t=m.query.transaction_id;await te(t)}f.value=!1}),(t,l)=>{var E,L,G;const g=ie,oe=re,ae=ce,B=_e,q=X,le=xe,ne=ge;return c(),u("div",ze,[o(f)?(c(),pe(we,{key:0})):(c(),u("div",Ie,[r(ke,{user:o(P),onLogout:K},null,8,["user"]),r(be,{"is-title-visible":!0,"banner-title":"Advertising Form on Gointerling Website",class:"min-h-[250px] pt-44 sm:pt-60"}),e("div",{class:"flex-grow p-6 lg:px-36 flex flex-col gap-6 bg-no-repeat bg-cover bg-bottom mt-8",style:fe({backgroundImage:`url(${o(Ve)})`})},[o(h)==="fill-data"?(c(),u("section",De,[e("div",Re,[e("div",Ne,[Me,r(g,{modelValue:o(s).name,"onUpdate:modelValue":l[0]||(l[0]=i=>o(s).name=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",Oe,[Te,r(g,{modelValue:o(s).tagline,"onUpdate:modelValue":l[1]||(l[1]=i=>o(s).tagline=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),e("div",qe,[Ee,e("div",Le,[r(oe,{modelValue:o(s).description,"onUpdate:modelValue":l[2]||(l[2]=i=>o(s).description=i),class:"w-full"},null,8,["modelValue"]),Ge])]),e("div",He,[Je,r(ae,{modelValue:o(s).package,"onUpdate:modelValue":l[3]||(l[3]=i=>o(s).package=i),options:o(S),placeholder:"Select Package",class:"w-full sm:w-10/12"},{label:v(()=>[e("div",We,[Qe,e("span",Xe,a(o(s).package.name),1)])]),option:v(({option:i})=>[e("div",Ke,[e("div",Ye,[e("span",{class:Q([i.online?"bg-green-400":"bg-accent","inline-block h-2 w-2 flex-shrink-0 rounded-full"]),"aria-hidden":"true"},null,2)]),e("div",Ze,[e("span",et,a(i.name),1),e("span",tt," Paket "+a(i.duration)+" Bulan ",1),e("span",st,"Harga "+a(C(i.price)),1),e("span",ot," Ukuran "+a(i.size_x)+" x "+a(i.size_y),1),e("span",at," Penayangan di "+a($(i.route_json)),1)])])]),_:1},8,["modelValue","options"])]),e("div",lt,[nt,r(J,{class:"w-full sm:w-10/12",title:"Ads Banner",accept:"images/*","max-size":"6291456",onFileUploaded:x})]),e("div",it,[r(B,{class:"w-full sm:w-10/12 bg-accent",block:"",onClick:se,disabled:o(F)},{default:v(()=>[A(" Continue ")]),_:1},8,["disabled"])])])])):w("",!0),o(h)==="payment"?(c(),u("section",rt,[e("div",ct,[e("div",dt,[ut,r(le,{ui:{body:{padding:""}},class:"w-full sm:w-[600px] relative"},{default:v(()=>[e("img",{src:o(s).image_url,alt:"",class:"w-full h-full object-cover rounded-lg"},null,8,mt),e("div",pt,[e("div",ft,[e("div",_t,[e("button",{onClick:l[4]||(l[4]=(...i)=>t.cancel&&t.cancel(...i)),class:"text-white bg-none"},[r(q,{name:"x"})])]),e("div",xt,[e("div",gt,[e("h6",ht,a(o(s).tagline),1),e("p",vt,a(o(s).description),1)])])])])]),_:1})]),o(s).status==="active"?(c(),u("div",yt,[wt,e("div",kt,[bt,e("h6",Ut,a(o(s).name),1),Ft,e("h6",St,a(o(s).tagline),1),Ct,e("h6",jt,a(o(s).package.name)+" ("+a(o(s).package.duration)+" Bulan) ",1),e("span",Pt,a(C(o(s).package.price)),1),At,r(ne,{color:T(o(s).status).color,variant:"soft"},{default:v(()=>[A(a(T(o(s).status).text),1)]),_:1},8,["color"]),$t,e("h6",Bt,a(o(s).valid_until_date?new Date(o(s).valid_until_date).toLocaleDateString():"-"),1)])])):(c(),u("div",Vt,[zt,e("div",It,[Dt,e("h6",Rt,a(C(o(s).package.price)),1),e("span",Nt,a((E=o(y))==null?void 0:E.bank_account_name)+" Account ",1),e("h6",Mt,[A(a((L=o(y))==null?void 0:L.bank_account)+" ",1),e("b",Ot,"("+a((G=o(y))==null?void 0:G.bank)+")",1),r(B,{size:"xs",variant:"outline",color:"blue",onClick:l[5]||(l[5]=i=>{var H;return n((H=o(y))==null?void 0:H.bank_account)}),class:""},{default:v(()=>[r(q,{name:"copy",class:"text-lg"})]),_:1})]),e("span",Tt,a(o(U)?"Re":"")+" Upload Proof of Payment ",1),o(U)?(c(),u("div",qt,[r(B,{color:"primary",class:"text-white py-3 rounded-lg my-1",onClick:t.toggleIsReupload},{default:v(()=>[A(" Cancel ")]),_:1},8,["onClick"]),r(B,{color:"primary",class:"text-white py-3 rounded-lg my-1",onClick:t.toggleIsReupload},{default:v(()=>[A(" Re-Upload ")]),_:1},8,["onClick"])])):w("",!0),r(J,{class:"w-full my-4",title:"Proof of Payment",accept:"image/*","max-size":"6291456",onFileUploaded:t.uploadProofOfPayment},null,8,["onFileUploaded"])])]))])])):w("",!0)],4)]))])}}};export{ns as default};
