import{P as H}from"./BY_JkBEi.js";import{_ as J}from"./Dtzv6wM1.js";import{_ as K}from"./BNxQcoJK.js";import{_ as Q}from"./DQT5woQ5.js";import{y as W,g as X,z as Z,A as E,r as c,B as F,h as ee,i as te,c as i,l as se,a as s,b as t,d as m,k as p,w as o,T as le,o as n,t as T,C as A,s as ae}from"./JKjsIVvW.js";import{_ as oe}from"./BktlpwRL.js";import{w as ne,l as N}from"./C17_-YHq.js";import{c as R,a as x,b as ie}from"./M1_3KTZr.js";import"./-17ej8q4.js";import"./CEcrQ7c2.js";const re=()=>{const{$axios:f}=W();return{login(y){return f.post("/auth/login",y)},register(y){return f.post("/auth/register",y)},logout(){return f.post("/auth/logout")},getUser(){return f.get("/auth/user")},getTestData(){return f.get("/test")}}},ue={key:1,class:"flex justify-center items-center h-screen background"},ce={class:"bg-white rounded-lg shadow-md grid grid-cols-2 gap-2"},de={class:"flex flex-col justify-between bg-accent rounded-l-lg"},me={class:"w-full h-full flex justify-center"},pe=["src"],fe={class:"relative w-full px-3"},ge={key:"login",class:"px-10 py-8"},_e=["src"],he={class:"text-2xl font-bold my-6 text-primary"},ve={class:"relative"},xe={key:0,class:"flex items-center gap-1"},ye={key:1,class:"flex items-center gap-1"},we=s("hr",{class:"py-2 mt-4"},null,-1),be={class:"w-full bg-white py-2 rounded-md flex gap-2 justify-center items-center border-2 border-gray-100"},ke={class:"mt-4 flex justify-between text-sm text-gray-600"},Ve={key:"register",class:"px-10 py-8"},qe=["src"],Pe={class:"text-2xl font-bold my-6 text-primary"},Ce={class:"relative"},Se={key:0,class:"flex items-center gap-1"},Ue={key:1,class:"flex items-center gap-1"},$e={class:"relative"},je={key:0,class:"flex items-center gap-1"},Be={key:1,class:"flex items-center gap-1"},Le=s("hr",{class:"py-2 mt-4"},null,-1),Ee={class:"w-full bg-white py-2 rounded-md flex gap-2 justify-center items-center border-2 border-gray-100"},Fe={class:"mt-4 flex justify-between text-sm text-gray-600"},ze={__name:"login",setup(f){const{login:y,register:D}=re(),w=X(),V=Z();E();const{as:b,type:I}=E().query,g=c("clinton@example.com"),_=c("12345678"),q=c(""),P=c("Sir Alex");F("token");const k=c("login"),U=c(!0),d=c(!1),u=c(!1),M=R().shape({email:x().email("Invalid email").required("Email is required"),password:x().required("Password is required")}),O=R().shape({fullname:x().required("Full name is required"),email:x().email("Invalid email").required("Email is required"),password:x().required("Password is required"),confirmPassword:x().oneOf([ie("password"),null],"Passwords must match").required("Confirm password is required")}),$=l=>{k.value=l,V.push({query:{as:b,type:l}})},j=async()=>{d.value=!0;const l={email:g.value,password:_.value};await y(l).then(e=>{const S=F("token");S.value=e.data.data,d.value=!1,w.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"You have successfully logged in!"}),V.push("/")}).catch(e=>{console.error(e),w.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:e.response.data.error}),d.value=!1})},G=async()=>{d.value=!0;const l={fullname:P.value,email:g.value,password:_.value,password_confirmation:q.value,as:b==="facilitator"?"facilitator":"client"};await D(l).then(e=>{w.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"You have successfully registered!"}),j()}).catch(e=>{d.value=!1,console.error(e),w.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:Y(e.response.data.error)})})},Y=l=>{for(const e in l)if(l[e].length>0)return l[e][0];return null},z=l=>{V.push(l)},C=()=>{u.value=!u.value};return ee(()=>I,l=>{l==="register"?k.value="register":k.value="login"},{immediate:!0}),te(()=>{U.value=!1}),(l,e)=>{const S=H,r=J,h=K,v=Q,B=ae,L=oe;return n(),i("div",null,[U.value?(n(),se(S,{key:0})):(n(),i("div",ue,[s("div",ce,[s("div",de,[s("button",{class:"flex gap-2 items-center justify-start mx-8 mt-8 text-white",onClick:e[0]||(e[0]=a=>z("/"))},[t(r,{name:"back",class:"text-white"}),m(" Back ")]),s("div",me,[s("img",{src:p(ne),class:"px-4 w-[300px] h-full"},null,8,pe)])]),s("div",fe,[t(le,{name:"fade",mode:"out-in"},{default:o(()=>[k.value==="login"?(n(),i("div",ge,[s("img",{src:p(N),class:"my-4 w-32"},null,8,_e),s("h1",he," Login "+T(p(b)==="facilitator"?"as Facilitator":""),1),t(L,{"validation-schema":p(M),onSubmit:j},{default:o(()=>[t(v,{name:"email",label:"Email",class:"mb-2"},{default:o(()=>[t(h,{type:"email",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(v,{name:"password",label:"Password",class:"mb-2"},{default:o(()=>[s("div",ve,[t(h,{type:u.value?"text":"password",modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",xe,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",ye,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(B,{type:"submit",loading:d.value,block:"",class:"w-full bg-blue-500 text-white text-center py-2 rounded-md hover:bg-blue-600"},{default:o(()=>[m(" Login ")]),_:1},8,["loading"])]),_:1},8,["validation-schema"]),we,s("button",be,[t(r,{name:"google",filled:""}),m(" Continue with Google ")]),s("p",ke,[m(" Don't have an account? "),s("a",{href:"#",onClick:e[3]||(e[3]=A(a=>$("register"),["prevent"])),class:"text-blue-500 hover:underline"}," Register ")])])):(n(),i("div",Ve,[s("div",null,[s("img",{src:p(N),class:"my-4 w-32"},null,8,qe),s("h1",Pe," Register "+T(p(b)==="facilitator"?"as Facilitator":""),1),t(L,{"validation-schema":p(O),onSubmit:G},{default:o(()=>[t(v,{name:"fullname",label:"Full Name",class:"mb-2"},{default:o(()=>[t(h,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=a=>P.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(v,{name:"email",label:"Email",class:"mb-2"},{default:o(()=>[t(h,{type:"email",modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a),required:"",class:"w-full"},null,8,["modelValue"])]),_:1}),t(v,{name:"password",label:"Password",class:"mb-2"},{default:o(()=>[s("div",Ce,[t(h,{type:u.value?"text":"password",modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",Se,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",Ue,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(v,{name:"confirmPassword",label:"Confirm Password",class:"mb-2"},{default:o(()=>[s("div",$e,[t(h,{type:u.value?"text":"password",modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=a=>q.value=a),required:"",class:"w-full"},null,8,["type","modelValue"]),s("button",{type:"button",onClick:C,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"},[u.value?(n(),i("span",je,[t(r,{name:"eye-off",filled:"",class:"text-lg"})])):(n(),i("span",Be,[t(r,{name:"eye",filled:"",class:"text-lg"})]))])])]),_:1}),t(B,{type:"submit",loading:d.value,block:"",class:"w-full bg-blue-500 text-white text-center py-2 rounded-md hover:bg-blue-600"},{default:o(()=>[m(" Sign Up ")]),_:1},8,["loading"])]),_:1},8,["validation-schema"]),Le,s("button",Ee,[t(r,{name:"google",filled:""}),m(" Continue with Google ")]),s("p",Fe,[m(" Already have an account? "),s("a",{href:"#",onClick:e[8]||(e[8]=A(a=>$("login"),["prevent"])),class:"text-blue-500 hover:underline"}," Login ")])])]))]),_:1})])])]))])}}};export{ze as default};
