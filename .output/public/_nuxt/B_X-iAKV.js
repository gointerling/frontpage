import{_ as B}from"./CAYk7iLE.js";import{g as $,r as l,o as a,c as i,a as p,b as g,q as u,t as v}from"./CLq9dtKI.js";import{u as E}from"./CcVy4ni9.js";const I={class:"file-upload"},M=["accept"],O={key:0,class:"px-4 py-2 border border-primary rounded hover:bg-primary flex items-center gap-1 group transition duration-200"},V=p("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1),D=[V],R={key:1},j=p("span",{class:"text-primary group-hover:text-white transition duration-200"}," Upload File ",-1),q=p("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1),P={key:2,class:"mt-2 text-gray-700 text-xs"},T={key:3,class:"mt-2 text-red-500 text-xs"},J={__name:"FileUpload",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0}},emits:["fileUploaded"],setup(m,{emit:y}){const{uploadFile:b,deleteFile:F}=E(),n=m,c=$(),k=y,d=l(null),r=l(""),s=l(""),f=l(null),h=l(!1),S=()=>{d.value.click()},U=()=>{const e=d.value.files[0];e&&(r.value=e.name,n.maxSize&&e.size>n.maxSize?(s.value=`File size exceeds the limit of ${C(n.maxSize/1024/1024,2)} MB.`,r.value=""):(s.value="",N(e,`${n.title}_${e.name}`)))},z=()=>{d.value.value=null,r.value="",s.value="",w(f.value)},C=(e,t)=>+(Math.round(e+"e"+t)+"e-"+t),N=(e,t)=>{h.value=!0,b(e,t).then(o=>{h.value=!1,f.value=o.data.data.fileRecord,x(o.data.data.fileRecord.url),c.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(o=>{console.error(o),c.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:_(o.response.data.error)})})},w=e=>{F(e.id).then(()=>{x(""),c.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(t=>{console.error(t),c.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:_(t.response.data.error)})})},x=e=>{k("fileUploaded",e)},_=e=>e.errors?e.errors[Object.keys(e.errors)[0]][0]:e.message;return(e,t)=>{const o=B;return a(),i("div",I,[p("input",{ref_key:"fileInput",ref:d,type:"file",accept:m.accept,class:"hidden",onChange:U},null,40,M),h.value?(a(),i("button",O,D)):(a(),i("div",R,[r.value?u("",!0):(a(),i("button",{key:0,onClick:S,class:"px-4 py-2 border border-primary rounded hover:bg-primary flex items-center gap-1 group transition duration-200"},[g(o,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),j])),r.value?(a(),i("button",{key:1,onClick:z,class:"px-4 py-2 border border-red-800 rounded hover:bg-red-800 flex items-center gap-1 group transition duration-200"},[g(o,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),q])):u("",!0)])),r.value?(a(),i("p",P," Selected file: "+v(r.value),1)):u("",!0),s.value?(a(),i("p",T,v(s.value),1)):u("",!0)])}}};export{J as _};
